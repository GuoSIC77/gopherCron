var ae=Object.defineProperty,le=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var K=(e,a,n)=>a in e?ae(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,k=(e,a)=>{for(var n in a||(a={}))ie.call(a,n)&&K(e,n,a[n]);if(I)for(var n of I(a))se.call(a,n)&&K(e,n,a[n]);return e},G=(e,a)=>le(e,ne(a));import{a as oe,r as V,c as d,w as R,h as Q,Q as $,S as ue,g as de,f as H,u as W,k as M,B as D,t,G as C,x as F,q as u,m as S,I as ce,e as re,H as J,D as X,cG as me,K as fe,l as we}from"./index.e18600f8.js";import{Q as ve}from"./QInnerLoading.32d9f1e2.js";import{Q as be}from"./QInput.75b94522.js";import{u as xe,a as ge}from"./use-dark.f89e8300.js";import{b as ye}from"./uid.81432f81.js";import{_ as Y}from"./ModifyBox.23552ac3.js";import{b as he,a as _e,Q as ke}from"./QDialog.07d9a48e.js";import{Q as Ve,C as Be}from"./ClosePopup.665fa76c.js";import{f as Ce}from"./datetime.6205e5a7.js";import{g as Se}from"./utils.b9794437.js";import"./use-key-composition.4a5ce83a.js";import"./focus-manager.32f8d49a.js";import"./QForm.7e1af889.js";import"./use-prevent-scroll.d4f2a0d7.js";var $e=oe({name:"QPagination",props:G(k({},xe),{modelValue:{type:Number,required:!0},min:{type:Number,default:1},max:{type:Number,required:!0},color:{type:String,default:"primary"},textColor:String,activeColor:String,activeTextColor:String,inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},maxPages:{type:Number,default:0,validator:e=>e>=0},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,dense:Boolean,padding:{type:String,default:"3px 2px"}}),emits:["update:modelValue"],setup(e,{emit:a}){const{proxy:n}=de(),{$q:c}=n,y=ge(e,c),g=V(null),w=d({get:()=>e.modelValue,set:l=>{if(l=parseInt(l,10),e.disable||isNaN(l))return;const o=ye(l,e.min,e.max);e.modelValue!==o&&a("update:modelValue",o)}});R(()=>e.min+e.max,()=>{w.value=e.modelValue});function r(l,o){return[!0,!1].includes(l)?l:o}const f=d(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),v=d(()=>w.value+" / "+e.max),s=d(()=>r(e.boundaryLinks,e.input)),i=d(()=>r(e.boundaryNumbers,!e.input)),Z=d(()=>r(e.directionLinks,e.input)),L=d(()=>r(e.ellipses,!e.input)),P=d(()=>{const l=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?l.reverse():l}),p=d(()=>e.disable===!0?{"aria-disabled":"true"}:{}),ee=d(()=>({round:e.round,rounded:e.rounded,outline:e.outline,unelevated:e.unelevated,push:e.push,glossy:e.glossy,dense:e.dense,padding:e.padding,color:e.color,flat:!0,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),j=d(()=>({flat:e.flat,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor}));function q(l){w.value=l}function te(l){w.value=w.value+l}function U(){w.value=g.value,g.value=null}function x(l,o){const h=k(k({},ee.value),l);return o!==void 0&&(e.toFn!==void 0?h.to=e.toFn(o):h.onClick=()=>q(o)),Q($,h)}return Object.assign(n,{set:q,setByOffset:te}),()=>{const l=[],o=[],h=[];if(s.value&&(l.push(x({key:"bls",disable:e.disable||e.modelValue<=e.min,icon:P.value[0]},e.min)),o.unshift(x({key:"ble",disable:e.disable||e.modelValue>=e.max,icon:P.value[3]},e.max))),Z.value&&(l.push(x({key:"bdp",disable:e.disable||e.modelValue<=e.min,icon:P.value[1]},e.modelValue-1)),o.unshift(x({key:"bdn",disable:e.disable||e.modelValue>=e.max,icon:P.value[2]},e.modelValue+1))),e.input===!0)h.push(Q(be,{class:"inline",style:{width:`${v.value.length/1.5}em`},type:"number",dense:!0,value:g.value,disable:e.disable,dark:y.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:v.value,min:e.min,max:e.max,"onUpdate:modelValue"(b){g.value=b},onKeyup(b){ue(b,13)===!0&&U()},onBlur:U}));else{let b=Math.max(e.maxPages,1+(L.value?2:0)+(i.value?2:0)),_=e.min,B=e.max,O=!1,T=!1,z=!1,A=!1;e.maxPages&&b<e.max-e.min+1&&(b=1+Math.floor(b/2)*2,_=Math.max(e.min,Math.min(e.max-b+1,e.modelValue-Math.floor(b/2))),B=Math.min(e.max,_+b-1),i.value&&(z=!0,_+=1),L.value&&_>e.min+(i.value?1:0)&&(O=!0,_+=1),i.value&&(A=!0,B-=1),L.value&&B<e.max-(i.value?1:0)&&(T=!0,B-=1));const N={minWidth:`${Math.max(2,String(e.max).length)}em`};if(z){const m=e.min===e.modelValue;l.push(x(k({key:"bns",style:N,disable:e.disable,flat:!m,label:e.min},m?j.value:{}),e.min))}if(A){const m=e.max===e.modelValue;o.unshift(x(k({key:"bne",style:N,disable:e.disable,flat:!m,label:e.max},m?j.value:{}),e.max))}O&&l.push(x({key:"bes",style:N,disable:e.disable,label:"\u2026",ripple:!1},_-1)),T&&o.unshift(x({key:"bee",style:N,disable:e.disable,label:"\u2026",ripple:!1},B+1));for(let m=_;m<=B;m++){const E={key:`bpg${m}`,style:N,disable:e.disable,label:m};m===e.modelValue&&Object.assign(E,j.value),h.push(x(E,m))}}return Q("div",k({class:f.value},p.value),[l,Q("div",{class:"row justify-center"},[h]),o])}}});const Ne={tabindex:"0",class:"focus:tw-outline-none tw-text-sm tw-leading-none tw-text-gray-600 tw-h-16"},Pe={class:"tw-w-1/3 tw-px-4"},Qe={class:"tw-flex tw-items-center"},Me={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},Fe={class:"tw-text-xs tw-font-bold tw-leading-3 tw-text-white"},Le={class:"tw-pl-2"},je={class:"tw-text-sm tw-font-medium tw-leading-none dark:tw-text-white"},De={class:"tw-text-xs tw-leading-3 tw-text-gray-400 tw-mt-2"},qe={class:"tw-w-1/4 tw-px-4"},Ue={class:"tw-flex tw-items-center tw-text-gray-400"},Oe={class:"tw-w-1/4 tw-px-4"},Te={class:"tw-flex tw-items-center tw-text-gray-400"},ze={class:"tw-px-4"},Ae={class:"tw-w-min tw-flex tw-scale-75 md:tw-scale-100"},Ee=X("\u7F16\u8F91"),Ie=X("\u5220\u9664\u7528\u6237"),Ke={class:"q-ml-sm"},Ge=H({props:{user:{type:Object,default:null}},emits:["modify"],setup(e,{emit:a}){const n=e,c=W(),y=Se(n.user.name),g=()=>{a("modify",{})},w=async()=>{(await me({id:n.user.id})).meta.code===0&&(c.commit("success",{message:"\u5220\u9664\u6210\u529F"}),f.value=!1,a("modify",{}))},r=V(!1),f=V(!1);return(v,s)=>(M(),D(J,null,[t("tr",Ne,[t("td",Pe,[t("div",Qe,[t("div",Me,[t("p",Fe,C(F(y)),1)]),t("div",Le,[t("p",je,C(e.user.name),1),t("p",De,C(e.user.permissions.join(", ")||"-"),1)])])]),t("td",qe,[t("div",Ue,C(e.user.account),1)]),t("td",Oe,[t("div",Te,C(F(Ce)(e.user.createTime*1e3)),1)]),t("td",ze,[t("div",Ae,[u($,{color:"primary",class:"tw-mr-2 md:tw-mr-4","text-color":"black",onClick:s[0]||(s[0]=i=>r.value=!0)},{default:S(()=>[Ee]),_:1}),u($,{disable:e.user.id===1,flat:"",class:"tw-text-red-300",onClick:s[1]||(s[1]=i=>f.value=!0)},{default:S(()=>[Ie]),_:1},8,["disable"])])])]),u(ke,{modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=i=>f.value=i)},{default:S(()=>[u(he,null,{default:S(()=>[u(_e,{class:"row items-center"},{default:S(()=>[u(ce,{icon:"delete",color:"red","text-color":"white"}),t("span",Ke,"\u662F\u5426\u8981\u5220\u9664\u7528\u6237 "+C(e.user.name),1)]),_:1}),u(Ve,{align:"right"},{default:S(()=>[re(u($,{flat:"",label:"\u53D6\u6D88"},null,512),[[Be]]),u($,{flat:"",label:"\u5220\u9664",color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["modelValue"]),u(Y,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=i=>r.value=i),user:e.user,onModify:g},null,8,["modelValue","user"])],64))}}),Re={class:"tw-w-full tw-p-4"},He={class:"q-dark tw-w-full tw-rounded tw-overflow-hidden"},We={class:"tw-px-4 tw-py-4"},Je={class:"tw-flex tw-items-center tw-justify-between"},Xe=t("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-base sm:tw-text-lg md:tw-text-xl lg:tw-text-2xl tw-font-bold tw-leading-normal tw-text-primary"}," \u7528\u6237\u7BA1\u7406 ",-1),Ye={class:"tw-mt-0"},Ze={class:"q-dark tw-px-4 tw-pb-5 tw-min-h-50 tw-relative"},pe={class:"tw-overflow-x-auto"},et={class:"tw-w-full tw-whitespace-nowrap"},tt={class:"q-pa-lg flex flex-center"},xt=H({setup(e){const a=V(1),n=V(10),c=V(!1),y=W(),g=d(()=>y.state.Root.users),w=d(()=>{const v=y.state.Root.userTotal||0;return Math.ceil(v/n.value)}),r=V(!1),f=async()=>{r.value=!0;try{await y.dispatch("fetchUsers",{page:a.value,pagesize:n.value})}catch(v){console.log(v)}r.value=!1};return f(),R(a,(v,s)=>{f()}),(v,s)=>(M(),D("div",Re,[t("div",He,[t("div",We,[t("div",Je,[Xe,t("div",Ye,[u($,{flat:"",class:"tw-text-white",icon:"add",onClick:s[0]||(s[0]=i=>c.value=!0)})])])]),t("div",Ze,[t("div",pe,[t("table",et,[t("tbody",null,[(M(!0),D(J,null,fe(F(g),i=>(M(),we(Ge,{key:i.id,user:i,onModify:f},null,8,["user"]))),128))])])]),u(ve,{size:"md",showing:r.value},null,8,["showing"])]),t("div",tt,[u($e,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value=i),color:"grey-4","active-color":"black",max:F(w),"boundary-numbers":!1},null,8,["modelValue","max"])]),u(Y,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value=i),onModify:f},null,8,["modelValue"])])]))}});export{xt as default};

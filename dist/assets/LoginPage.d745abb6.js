import{_,j as x,l as h,E as y,x as e,aY as q,r as w,u as R,B as V,D as L,aC as k,s as n,q as g,Q as m,F as b,bi as E}from"./index.8ec00635.js";import{Q as v}from"./QInput.18ea454a.js";import{Q}from"./QForm.558588c8.js";import"./use-key-composition.3f5e825f.js";import"./focus-manager.5de30bde.js";import"./uid.42677368.js";const U=["src"],A=e("div",{class:"tw-font-bold tw-text-md tw-text-center"},"GOPHERCRON",-1),O=x({props:{class:{type:String,default:""},src:{type:String,default:"/logo.png"}},setup(f){const u=f;return(i,r)=>(h(),y("div",{class:q(u.class+" tw-flex tw-items-center tw-flex-col")},[e("img",{src:f.src,alt:"logo"},null,8,U),A],2))}});var I=_(O,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/LogoTpl.vue"]]);const N={class:"tw-h-full tw-bg-gradient-to-tl tw-from-primary tw-to-black tw-w-full tw-px-4"},S={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-h-full tw-w-full"},j={class:"tw-bg-[#1D1D1D] tw-shadow tw-rounded tw-max-w-md lg:tw-w-1/3 sm:tw-w-2/3 tw-w-full tw-p-10 md:tw-mt-6 tw-mt-2"},P=b(" \u4F7F\u7528 OIDC \u767B\u5F55 "),T=e("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-2xl tw-font-extrabold tw-leading-6"}," \u8D26\u53F7\u5BC6\u7801\u767B\u5F55 ",-1),$=e("p",{tabindex:"0",class:"tw-pb-8 focus:tw-outline-none tw-text-sm tw-mt-4 tw-font-medium tw-leading-none tw-text-gray-500"},[b(" \u6CA1\u6709\u8D26\u53F7? "),e("a",{href:"javascript:void(0)",class:"hover:text-gray-500 focus:text-gray-500 focus:outline-none focus:underline hover:underline text-sm font-medium leading-none text-gray-800 cursor-pointer"},"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5F00\u901A")],-1),z=e("label",{id:"email",class:"tw-text-sm tw-font-medium tw-leading-none tw-text-white"},"\u8D26\u53F7",-1),G={class:"tw-mt-6 tw-w-full"},H=e("label",{for:"pass",class:"tw-text-sm tw-font-medium tw-leading-none tw-text-white"},"\u5BC6\u7801",-1),M={class:"tw-mt-8"},W=x({setup(f){const u=w(""),i=w(""),r=R(),p=V(),l=L(),c=w(!1),a=w(!1);l.query&&l.query.code&&l.query.state&&C(l.query.code,l.query.state);async function C(t,o){if(a.value=!0,await r.dispatch("loginWithOIDC",{code:t,state:o}),r.state.Root.logined){const s=l.query.redirect;let d="/";typeof s=="string"?d=s:s&&s.length>0&&(d=s[0]||d),await p.push(d)}a.value=!1}async function F(){a.value=!0;try{const t=await E();window.location.href=t}catch(t){console.error(t),a.value=!1}}async function B(){if(c.value=!0,await r.dispatch("login",{username:u.value,password:i.value}),r.state.Root.logined){const t=l.query.redirect;let o="/";typeof t=="string"?o=t:t&&t.length>0&&(o=t[0]||o),await p.push(o)}c.value=!1}function D(){u.value="",i.value=""}return k(()=>r.commit("unauthed")),(t,o)=>(h(),y("div",N,[e("div",S,[n(I,{class:"tw-w-24 md:tw-w-32",src:"./logo_white.png"}),e("div",j,[n(m,{outline:"","text-color":"white",loading:a.value,disable:a.value||c.value,class:"focus:tw-ring-2 tw-mb-6 focus:tw-ring-offset-2 tw-font-semibold tw-leading-none tw-text-black tw-outline-non tw-border tw-rounded tw-py-2 tw-w-full",onClick:F},{default:g(()=>[P]),_:1},8,["loading","disable"]),T,$,n(Q,{onSubmit:B,onReset:D},{default:g(()=>[e("div",null,[z,n(v,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),dense:"",type:"text",square:"",filled:""},null,8,["modelValue"])]),e("div",G,[H,n(v,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value=s),dense:"",type:"password",square:"",filled:""},null,8,["modelValue"])]),e("div",M,[n(m,{color:"primary",type:"submit",label:"\u767B\u5F55","text-color":"black",loading:c.value,disable:a.value||c.value,class:"focus:tw-ring-2 focus:tw-ring-offset-2 tw-font-semibold tw-leading-none tw-text-black tw-outline-non tw-border tw-rounded tw-py-2 tw-w-full"},null,8,["loading","disable"]),n(m,{color:"primary",type:"reset",label:"\u91CD\u7F6E",flat:"",class:"tw-text-sm tw-w-full tw-mt-3 tw-border tw-rounded"})])]),_:1})])])]))}});var et=_(W,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/LoginPage.vue"]]);export{et as default};

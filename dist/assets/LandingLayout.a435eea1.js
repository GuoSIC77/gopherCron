import{_ as Q,k as S,r as v,l as C,u as O,m as M,n as z,o as x,c as A,w as t,a as e,M as P,Q as $,K as B,f as I,x as N,C as T,h as k,A as u,i as H,E as j,F as G,H as q,S as g,T as c,b as p,ab as J,q as b,ac as K,ad as W,U as Y,a2 as X,d as y,t as F,z as Z,Y as ee,ae as te,J as ae,aa as se,af as oe,ag as le,ah as re,ai as ne,p as U,aj as ue,L as ie,ak as de,a4 as ce,al as me,W as fe,e as D,am as we,an as pe,ao as ge}from"./index.b313b377.js";const ve={key:0,class:"text-h6"},_e={key:1,class:"text-h6"},he=S({props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:w}){const d=_,f=v(!1),l=C({get:()=>d.modelValue,set:a=>w("update:modelValue",a)}),o=O(),s=v({title:"",remark:"",id:""}),m=v({title:"",remark:"",id:""}),r=C(()=>{const a=s.value,n=m.value;return(a==null?void 0:a.title.trim())===(n==null?void 0:n.title.trim())&&(a==null?void 0:a.remark.trim())===(n==null?void 0:n.remark.trim())}),V=C(()=>{const a=s.value;return(a==null?void 0:a.title.trim())!==""&&!r.value});M(()=>{z(()=>{l.value||(s.value=Object.assign({},m.value))})});async function h(){const a=s.value;if(!a){o.commit("error",{error:"\u8BF7\u8F93\u5165\u7EC4\u7EC7\u4FE1\u606F"});return}o.commit("cleanError"),f.value=!0,a.id!==""?await o.dispatch("updateOrg",{id:a.id,title:a.title.trim(),remark:a.remark.trim()}):await o.dispatch("createOrg",{title:a.title.trim(),remark:a.remark.trim()}),o.state.Root.currentError===void 0&&(l.value=!1),f.value=!1}return(a,n)=>(x(),A(G,{modelValue:u(l),"onUpdate:modelValue":n[2]||(n[2]=i=>j(l)?l.value=i:null),"no-backdrop-dismiss":!u(r)},{default:t(()=>[e(H,{class:"tw-w-96 q-pa-sm"},{default:t(()=>[e(P,{onSubmit:h},{default:t(()=>[e($,null,{default:t(()=>[s.value.id===""?(x(),B("div",ve,"\u521B\u5EFA\u7EC4\u7EC7")):(x(),B("div",_e,"\u7F16\u8F91\u7EC4\u7EC7"))]),_:1}),e($,null,{default:t(()=>[e(I,{modelValue:s.value.title,"onUpdate:modelValue":n[0]||(n[0]=i=>s.value.title=i),type:"text",label:"\u7EC4\u7EC7\u540D\u79F0",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(I,{modelValue:s.value.remark,"onUpdate:modelValue":n[1]||(n[1]=i=>s.value.remark=i),type:"textarea",label:"\u5907\u6CE8",square:"",filled:""},null,8,["modelValue"])]),_:1}),e($,{align:"right",class:"tw-flex tw-gap-4 tw-flex-col-reverse lg:tw-flex-row lg:tw-justify-end"},{default:t(()=>[N(e(k,{flat:"",label:"\u53D6\u6D88",class:"lg:tw-w-24 tw-w-full"},null,512),[[T,!0]]),e(k,{color:"primary","text-color":"black",type:"submit",label:s.value.id===""?"\u521B\u5EFA":"\u4FDD\u5B58",disable:!u(V),class:"lg:tw-w-24 tw-w-full",loading:f.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","no-backdrop-dismiss"]))}});var be=Q(he,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogOrgForm.vue"]]);const xe={class:"text-center"},ye=S({props:{behavior:{type:String,default:"default"}},setup(_){const w=O(),d=v([]);async function f(s,m){var V;const r=[{label:"\u901A\u7528",value:"baseorg"}];(V=w.state.Root.userOrgs)==null||V.forEach((h,a,n)=>{h.id!=="baseorg"&&r.push({label:h.title,value:h.id})}),d.value=r,m(()=>{console.log("select done")})}f("",()=>{});const l=C({get:()=>w.state.Root.currentOrg,set:s=>{!s||(l.value?w.dispatch("switchOrg",s):w.commit("setCurrentOrg",s),localStorage.setItem("gc_choosed_org",s))}});M(()=>{if(!l.value){const s=q();l.value=s.params.orgId||"baseorg",w.commit("setCurrentOrg",l.value)}});const o=v(!1);return(s,m)=>(x(),B(ee,null,[e(be,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=r=>o.value=r)},null,8,["modelValue"]),e(u(Z),{ref:"search",modelValue:u(l),"onUpdate:modelValue":m[2]||(m[2]=r=>j(l)?l.value=r:null),dense:"",dark:"",color:"text-white",standout:"bg-white text-black","emit-value":"","map-options":"",label:"\u9009\u62E9\u7EC4\u7EC7",options:d.value,behavior:_.behavior,style:{width:"300px"},onFilter:f},{"no-option":t(()=>[e(g,null,{default:t(()=>[e(c,null,{default:t(()=>[p("div",xe,[e(J,{color:"grey-5",size:"24px"})])]),_:1})]),_:1})]),append:t(()=>[e(b,{name:"add",onClick:m[1]||(m[1]=K(r=>o.value=!0,["stop","prevent"]))})]),option:t(r=>[e(g,W(r.itemProps,{class:"tw-text-white"}),{default:t(()=>[e(c,null,{default:t(()=>[e(Y,{innerHTML:r.opt.label},null,8,["innerHTML"])]),_:2},1024),e(c,{side:"",class:X({"default-type":!r.opt.type})},{default:t(()=>[e(k,{outline:"",dense:"","no-caps":"","text-color":"grey-5",size:"12px",class:"tw-bg-white q-px-sm"},{default:t(()=>[y(F(r.opt.type||"\u5207\u6362")+" ",1),e(b,{name:"subdirectory_arrow_left",size:"14px"})]),_:2},1024)]),_:2},1032,["class"])]),_:2},1040)]),_:1},8,["modelValue","options","behavior"])],64))}});var L=Q(ye,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/layouts/OrgSelect.vue"]]);const ke={class:"tw-flex tw-bg-primary tw-justify-start tw-space-x-2 tw-items-center tw-h-full tw-py-4 tw-px-3.5 tw-box-border tw-w-full tw-text-black tw-overflow-hidden"},Ee={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},Ce={class:"tw-text-xs tw-font-bold tw-rounded tw-leading-3 tw-text-white"},Fe={class:"q-item__section--main tw-flex tw-w-full tw-justify-between"},Ve={class:"tw-flex tw-flex-col tw-space-y-2 tw-overflow-hidden"},Be={class:"tw-text-base tw-leading-4 tw-whitespace-nowrap tw-overflow-hidden tw-overflow-ellipsis"},Qe={class:"tw-cursor-pointer tw-text-xs tw-leading-3"},Se=S({setup(_){const d=O().getters.currentUser,f=te(d.name),l=ae(),o=()=>{l.push({name:"user-profile"})};return(s,m)=>(x(),B("div",ke,[p("div",Ee,[p("p",Ce,F(u(f)),1)]),p("div",Fe,[p("div",Ve,[p("p",Be,F(u(d).name),1),p("p",Qe,F(u(d).account),1)]),e(k,{flat:"",dense:"",size:"md",icon:"more_horiz",round:"",onClick:o})])]))}});var Oe=Q(Se,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/layouts/UserBaseInfo.vue"]]);async function $e(){const _=await se.get("/version");return _.data.meta.code===0?_.data.response:""}const Ae=p("span",{class:"tw-text-lg tw-pl-2 tw-tracking-wide tw-font-bold tw-cursor-pointer"},"GopherCron",-1),Ie={key:0,class:"tw-text-sm"},Ue={class:"tw-hidden md:tw-flex"},De=p("svg",{fill:"#fff",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),Le=y("\u770B\u677F"),Me=y("\u9879\u76EE\u7BA1\u7406"),ze=y("\u4EFB\u52A1\u7F16\u6392"),Ne=y("\u7528\u6237\u7BA1\u7406"),je=y("\u8282\u70B9\u7BA1\u7406"),qe=y("\u9000\u51FA"),Re=S({setup(_){const w=oe(),d=v(!0);w.screen.lt.md&&(d.value=!1);const f=v(!0),l=v(!1),o=O(),s=q();z(()=>{if(!s.name)return;const n=["user-admin","node-admin"];l.value=n.includes(s.name.toString())});const m=C(()=>w.screen.lt.md?d.value:!f.value),r=v("");(async()=>{const n=await $e();r.value=n})();const h=C(()=>o.getters.notificationSetting);function a(){o.dispatch("changeNotificationStatus")}return(n,i)=>{const R=le("router-view");return x(),A(re,{view:"hHh Lpr lff",class:"rounded-borders tw-flex tw-flex-no-wrap tw-h-full tw-w-full"},{default:t(()=>[e(de,{class:"bg-black"},{default:t(()=>[e(ne,{class:"tw-gap-4"},{default:t(()=>[e(k,{flat:"",round:"",dense:"",icon:"menu",onClick:i[0]||(i[0]=E=>d.value=!d.value)}),Ae,r.value?(x(),B("span",Ie,"("+F(r.value)+")",1)):U("v-if",!0),p("div",Ue,[e(L)]),e(ue),e(k,{flat:"",round:"",dense:"",icon:u(h).status?"notifications":"notifications_off",onClick:a},{default:t(()=>[e(ie,null,{default:t(()=>[y(F(u(h).status?"\u70B9\u51FB\u5173\u95ED\u4EFB\u52A1\u72B6\u6001\u901A\u77E5":"\u70B9\u51FB\u5F00\u542F\u4EFB\u52A1\u72B6\u6001\u901A\u77E5"),1)]),_:1})]),_:1},8,["icon"]),e(k,{flat:"",round:"",dense:"",href:"https://github.com/holdno/gopherCron",target:"_blank"},{default:t(()=>[De]),_:1})]),_:1})]),_:1}),e(pe,{modelValue:d.value,"onUpdate:modelValue":i[2]||(i[2]=E=>d.value=E),mini:f.value,width:200,breakpoint:u(w).screen.sizes.md,onMouseover:i[3]||(i[3]=E=>f.value=!1),onMouseout:i[4]||(i[4]=E=>f.value=!0)},{default:t(()=>[e(ce,{style:{"margin-bottom":"80px",height:"calc(100% - 80px)"}},{default:t(()=>[e(me,{padding:""},{default:t(()=>[N(e(g,{class:"tw-flex md:tw-hidden"},{default:t(()=>[e(L,{behavior:"dialog"})]),_:1},512),[[fe,u(m)]]),e(g,{clickable:"",to:{name:"summary",params:{orgId:u(o).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"timeline"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[Le]),_:1})]),_:1},8,["to"]),e(g,{clickable:"",to:{name:"projects",params:{orgId:u(o).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"view_list"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[Me]),_:1})]),_:1},8,["to"]),e(g,{clickable:"",to:{name:"workflows",params:{orgId:u(o).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"mediation"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[ze]),_:1})]),_:1},8,["to"]),e(D,{class:"tw-bg-stone-800"}),u(o).getters.isAdmin?(x(),A(we,{key:0,modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=E=>l.value=E),label:"\u7CFB\u7EDF\u7BA1\u7406","header-class":"tw-font-medium",icon:"admin_panel_settings"},{default:t(()=>[e(g,{clickable:"","inset-level":.2,to:{name:"user-admin",params:{orgId:u(o).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"supervisor_account"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[Ne]),_:1})]),_:1},8,["inset-level","to"]),e(g,{clickable:"","inset-level":.2,to:{name:"node-admin",params:{orgId:u(o).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"dynamic_form"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[je]),_:1})]),_:1},8,["inset-level","to"])]),_:1},8,["modelValue"])):U("v-if",!0),e(D,{class:"tw-bg-stone-800"}),e(g,{clickable:"",to:{name:"logout"}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"logout"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[qe]),_:1})]),_:1})]),_:1})]),_:1}),e(Oe,{class:"tw-absolute tw-bottom-0 tw-left-0 tw-w-full",style:{height:"80px"}})]),_:1},8,["modelValue","mini","breakpoint"]),e(ge,{class:"tw-w-full tw-h-full tw-box-border"},{default:t(()=>[e(R)]),_:1})]),_:1})}}});var Te=Q(Re,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/layouts/LandingLayout.vue"]]);export{Te as default};

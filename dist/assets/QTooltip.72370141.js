var ne=Object.defineProperty,ie=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var x=(e,t,o)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,f=(e,t)=>{for(var o in t||(t={}))se.call(t,o)&&x(e,o,t[o]);if(E)for(var o of E(t))re.call(t,o)&&x(e,o,t[o]);return e},b=(e,t)=>ie(e,le(t));import{a as ue,r as H,c as g,w as A,U as j,ac as q,aa as D,h as M,T as ce,g as de,b as fe,X as ve}from"./index.8ec00635.js";import{u as he,v as L,b as ge,d as me,a as Te,r as Q,s as ye,c as W,p as N,e as pe}from"./QList.58a4b5dd.js";import{e as be,f as Se,h as Pe,u as we,a as Oe,i as ke,j as Ce,k as Ee,g as xe}from"./use-prevent-scroll.c821079a.js";var De=ue({name:"QTooltip",inheritAttrs:!1,props:b(f(f(f({},he),be),Se),{maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:L},self:{type:String,default:"top middle",validator:L},offset:{type:Array,default:()=>[14,14],validator:ge},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}}),emits:[...Pe],setup(e,{slots:t,emit:o,attrs:m}){let s,r;const T=de(),{proxy:{$q:n}}=T,u=H(null),v=H(!1),R=g(()=>N(e.anchor,n.lang.rtl)),U=g(()=>N(e.self,n.lang.rtl)),_=g(()=>e.persistent!==!0),{registerTick:B,removeTick:I}=we(),{registerTimeout:h}=Oe(),{transitionProps:V,transitionStyle:X}=ke(e),{localScrollTarget:S,changeScrollEvent:$,unconfigureScrollTarget:z}=me(e,k),{anchorEl:i,canShow:F,anchorEvents:c}=Te({showing:v,configureAnchorEl:te}),{show:G,hide:y}=Ce({showing:v,canShow:F,handleShow:K,handleHide:Y,hideOnRouteChange:_,processOnMount:!0});Object.assign(c,{delayShow:Z,delayHide:ee});const{showPortal:P,hidePortal:w,renderPortal:J}=Ee(T,u,oe,"tooltip");if(n.platform.is.mobile===!0){const a={anchorEl:i,innerRef:u,onClickOutside(l){return y(l),l.target.classList.contains("q-dialog__backdrop")&&ve(l),!0}},p=g(()=>e.modelValue===null&&e.persistent!==!0&&v.value===!0);A(p,l=>{(l===!0?pe:Q)(a)}),j(()=>{Q(a)})}function K(a){P(),B(()=>{r=new MutationObserver(()=>d()),r.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),d(),k()}),s===void 0&&(s=A(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,d)),h(()=>{P(!0),o("show",a)},e.transitionDuration)}function Y(a){I(),w(),O(),h(()=>{w(!0),o("hide",a)},e.transitionDuration)}function O(){r!==void 0&&(r.disconnect(),r=void 0),s!==void 0&&(s(),s=void 0),z(),q(c,"tooltipTemp")}function d(){ye({targetEl:u.value,offset:e.offset,anchorEl:i.value,anchorOrigin:R.value,selfOrigin:U.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Z(a){if(n.platform.is.mobile===!0){W(),document.body.classList.add("non-selectable");const p=i.value,l=["touchmove","touchcancel","touchend","click"].map(C=>[p,C,"delayHide","passiveCapture"]);D(c,"tooltipTemp",l)}h(()=>{G(a)},e.delay)}function ee(a){n.platform.is.mobile===!0&&(q(c,"tooltipTemp"),W(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),h(()=>{y(a)},e.hideDelay)}function te(){if(e.noParentEvent===!0||i.value===null)return;const a=n.platform.is.mobile===!0?[[i.value,"touchstart","delayShow","passive"]]:[[i.value,"mouseenter","delayShow","passive"],[i.value,"mouseleave","delayHide","passive"]];D(c,"anchor",a)}function k(){if(i.value!==null||e.scrollTarget!==void 0){S.value=xe(i.value,e.scrollTarget);const a=e.noParentEvent===!0?d:y;$(S.value,a)}}function ae(){return v.value===!0?M("div",b(f({},m),{ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",m.class],style:[m.style,X.value],role:"tooltip"}),fe(t.default)):null}function oe(){return M(ce,V.value,ae)}return j(O),Object.assign(T.proxy,{updatePosition:d}),J}});export{De as Q};

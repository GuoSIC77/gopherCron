var ue=Object.defineProperty,ie=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var X=(o,t,l)=>t in o?ue(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,Y=(o,t)=>{for(var l in t||(t={}))ce.call(t,l)&&X(o,l,t[l]);if(W)for(var l of W(t))me.call(t,l)&&X(o,l,t[l]);return o},G=(o,t)=>ie(o,de(t));import{_ as P,j as U,c as b,B as pe,u as A,l as w,m as j,z as v,A as L,r as y,o as H,k as fe,q as a,s as e,E as _,f as Q,Q as C,a as ve,h as we,b as ge,g as ye,w as be,N as K,F as h,I as Z,J as M,x as T,aT as ke,aI as R,aU as je,aV as _e,aW as $,y as z,aX as Ve,aS as ee,t as N,aY as te,D as oe}from"./index.8ec00635.js";import{Q as F}from"./QInput.18ea454a.js";import{Q as le}from"./QList.58a4b5dd.js";import{Q as xe}from"./QScrollArea.ffe2066c.js";import{C as ae}from"./Confirm.388454a6.js";import{a as E,b as O,Q as J,d as he,e as Ce}from"./QDialog.fd4f138b.js";import{Q as Ee}from"./QForm.558588c8.js";import{C as D,Q as se}from"./ClosePopup.229815c6.js";import{a as I,b as B,Q as q}from"./QItem.fd731537.js";import{Q as Qe}from"./QBtnDropdown.7cb8e38c.js";import{u as De,a as Pe}from"./focus-manager.5de30bde.js";import{a as Ue}from"./QChip.7657ac17.js";import{t as Fe,b as Se}from"./thumbStyle.856de4cb.js";import"./use-key-composition.3f5e825f.js";import"./uid.42677368.js";import"./use-prevent-scroll.c821079a.js";import"./touch.8160dcd9.js";import"./format.865294d5.js";const $e=U({props:{projectId:{type:Number,required:!0},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:t}){const l=o,n=b({get:()=>l.modelValue,set:g=>t("update:modelValue",g)}),p=pe(),d=A(),m=b(()=>d.state.Project.projects.find(g=>g.id===l.projectId));async function c(g){d.commit("cleanError"),await d.dispatch("deleteProject",{projectId:g}),d.state.Root.currentError===void 0&&(p.push({name:"projects"}),n.value=!1)}return(g,f)=>{var k;return w(),j(ae,{modelValue:v(n),"onUpdate:modelValue":f[0]||(f[0]=r=>L(n)?n.value=r:null),content:"\u662F\u5426\u8981\u5220\u9664\u9879\u76EE"+((k=v(m))==null?void 0:k.title)+"?",type:"warning",onConfirm:f[1]||(f[1]=r=>v(m)&&c(v(m).id))},null,8,["modelValue","content"])}}});var re=P($e,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogProjectDeleteConfirm.vue"]]);const Ie={key:0,class:"text-h6"},Be={key:1,class:"text-h6"},qe=U({props:{projectId:{type:Number,default:0},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:t}){const l=o,n=b({get:()=>l.modelValue,set:r=>t("update:modelValue",r)}),p=A(),d=b(()=>p.state.Project.projects.find(r=>r.id===l.projectId)),m=b(()=>{const r=d.value;return{title:(r==null?void 0:r.title)||"",remark:(r==null?void 0:r.remark)||""}}),c=y(m.value),g=b(()=>{const r=c.value,u=m.value;return r.title.trim()===u.title.trim()&&r.remark.trim()===u.remark.trim()}),f=b(()=>c.value.title.trim()!==""&&!g.value);H(()=>{fe(()=>{n.value||(c.value=Object.assign({},m.value))})});async function k(){const r=c.value;p.commit("cleanError"),l.projectId>0?await p.dispatch("updateProject",{projectId:l.projectId,title:r.title.trim(),remark:r.remark.trim()}):await p.dispatch("createProject",{title:r.title.trim(),remark:r.remark.trim()}),p.state.Root.currentError===void 0&&(n.value=!1)}return(r,u)=>(w(),j(J,{modelValue:v(n),"onUpdate:modelValue":u[2]||(u[2]=i=>L(n)?n.value=i:null),"no-backdrop-dismiss":!v(g)},{default:a(()=>[e(O,{class:"tw-w-96 q-pa-sm"},{default:a(()=>[e(Ee,{onSubmit:k},{default:a(()=>[e(E,null,{default:a(()=>[v(d)===void 0?(w(),_("div",Ie,"\u521B\u5EFA\u9879\u76EE")):(w(),_("div",Be,"\u7F16\u8F91\u9879\u76EE"))]),_:1}),e(E,null,{default:a(()=>[e(F,{modelValue:c.value.title,"onUpdate:modelValue":u[0]||(u[0]=i=>c.value.title=i),type:"text",label:"\u9879\u76EE\u540D",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(F,{modelValue:c.value.remark,"onUpdate:modelValue":u[1]||(u[1]=i=>c.value.remark=i),type:"textarea",label:"\u5907\u6CE8",square:"",filled:""},null,8,["modelValue"])]),_:1}),e(E,{align:"right",class:"tw-flex tw-gap-4 tw-flex-col-reverse lg:tw-flex-row lg:tw-justify-end"},{default:a(()=>[Q(e(C,{flat:"",label:"\u53D6\u6D88",class:"lg:tw-w-24 tw-w-full"},null,512),[[D]]),e(C,{color:"primary","text-color":"black",type:"submit",label:v(d)===void 0?"\u521B\u5EFA":"\u4FDD\u5B58",disable:!v(f),class:"lg:tw-w-24 tw-w-full"},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","no-backdrop-dismiss"]))}});var ne=P(qe,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogProjectForm.vue"]]);const Ae=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],Te=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var Re=ve({name:"QSkeleton",props:G(Y({},De),{tag:{type:String,default:"div"},type:{type:String,validator:o=>Ae.includes(o),default:"rect"},animation:{type:String,validator:o=>Te.includes(o),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String}),setup(o,{slots:t}){const l=ye(),n=Pe(o,l.proxy.$q),p=b(()=>{const m=o.size!==void 0?[o.size,o.size]:[o.width,o.height];return{"--q-skeleton-speed":`${o.animationSpeed}ms`,width:m[0],height:m[1]}}),d=b(()=>`q-skeleton q-skeleton--${n.value===!0?"dark":"light"} q-skeleton--type-${o.type}`+(o.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${o.animation}`:"")+(o.square===!0?" q-skeleton--square":"")+(o.bordered===!0?" q-skeleton--bordered":""));return()=>we(o.tag,{class:d.value,style:p.value},ge(t.default))}});function Ne(o){const t=document.createElement("textarea");t.value=o,t.contentEditable="true",t.style.position="fixed";const l=()=>{};he(l),document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");return t.remove(),Ce(l),n}function ze(o){return navigator.clipboard!==void 0?navigator.clipboard.writeText(o):new Promise((t,l)=>{const n=Ne(o);n?t(!0):l(n)})}const Le=T("div",{class:"text-h6"},"\u9879\u76EE\u4EBA\u5458\u7BA1\u7406",-1),Me=h(" \u6DFB\u52A0 "),Oe=U({props:{projectId:{type:Number,default:0},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:t}){const l=o,n=b({get:()=>l.modelValue,set:s=>t("update:modelValue",s)}),p=y([]);async function d(){p.value=await ke(R,l.projectId)}be(()=>[l.projectId,n.value],async([,s])=>{s&&d(),m.value=""});const m=y(""),c=y(!1);async function g(){c.value=!0;try{await je(R,l.projectId,m.value),m.value="",await d()}finally{c.value=!1}}const f=y(),k=y(!1);function r(s){f.value=s,k.value=!0}function u(){f.value=void 0,k.value=!1}async function i(s){c.value=!0;try{await _e(R,l.projectId,s.id),await d()}finally{c.value=!1}}return(s,V)=>(w(),j(J,{modelValue:v(n),"onUpdate:modelValue":V[3]||(V[3]=S=>L(n)?n.value=S:null)},{default:a(()=>{var S;return[e(ae,{modelValue:k.value,"onUpdate:modelValue":V[0]||(V[0]=x=>k.value=x),type:"warning",content:`\u786E\u5B9A\u8981\u79FB\u9664\u7528\u6237 ${(S=f.value)==null?void 0:S.name} \u5417\uFF1F`,onConfirm:V[1]||(V[1]=x=>f.value&&i(f.value).then(u))},null,8,["modelValue","content"]),e(O,{class:"tw-w-96 q-pa-sm"},{default:a(()=>[e(E,null,{default:a(()=>[Le]),_:1}),e(E,null,{default:a(()=>[(w(!0),_(M,null,K(p.value,x=>(w(),j(Ue,{key:x.id,removable:"",color:"primary","text-color":"black",onRemove:ut=>r(x)},{default:a(()=>[h(Z(x.name),1)]),_:2},1032,["onRemove"]))),128))]),_:1}),e(se,null,{default:a(()=>[e(F,{modelValue:m.value,"onUpdate:modelValue":V[2]||(V[2]=x=>m.value=x),class:"tw-w-full",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u5E10\u53F7"},{append:a(()=>[e(C,{loading:c.value,flat:"",icon:"add","text-color":"primary",onClick:g},{default:a(()=>[Me]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]}),_:1},8,["modelValue"]))}});var Je=P(Oe,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogProjectUsersManage.vue"]]);const We=h("\u7F16\u8F91"),Xe=h("\u4EBA\u5458\u7BA1\u7406"),Ye=h("\u9879\u76EEtoken"),Ge=h("\u5220\u9664"),He=T("div",{class:"text-h6"},"\u9879\u76EE Token",-1),Ke=U({props:{projectId:{type:Number,required:!0}},setup(o){const t=o,l=y(!1),n=A(),p=y(!1),d=y(!1),m=y(!1),c=y(!1),g=y(!1),f=y("");async function k(){f.value="",c.value=!0,g.value=!0;try{const u=await Ve(t.projectId);f.value=u}catch(u){console.error(u)}g.value=!1}function r(){ze(f.value).then(()=>{n.commit("success",{message:"token\u5DF2\u590D\u5236"})})}return(u,i)=>(w(),_(M,null,[e(re,{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=s=>p.value=s),"project-id":t.projectId},null,8,["modelValue","project-id"]),e(ne,{modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=s=>d.value=s),"project-id":t.projectId},null,8,["modelValue","project-id"]),e(Je,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=s=>m.value=s),"project-id":t.projectId},null,8,["modelValue","project-id"]),e(Qe,{modelValue:l.value,"onUpdate:modelValue":i[6]||(i[6]=s=>l.value=s),flat:"","dropdown-icon":"more_horiz","no-icon-animation":""},{default:a(()=>[e(le,{dense:""},{default:a(()=>[Q((w(),j(q,{clickable:"",class:"hover:tw-bg-primary hover:tw-text-black",onClick:i[3]||(i[3]=$(s=>d.value=!0,["stop"]))},{default:a(()=>[e(I,null,{default:a(()=>[e(B,null,{default:a(()=>[We]),_:1})]),_:1})]),_:1})),[[D]]),Q((w(),j(q,{clickable:"",class:"hover:tw-bg-primary hover:tw-text-black",onClick:i[4]||(i[4]=$(s=>m.value=!0,["stop"]))},{default:a(()=>[e(I,null,{default:a(()=>[e(B,null,{default:a(()=>[Xe]),_:1})]),_:1})]),_:1})),[[D]]),Q((w(),j(q,{clickable:"",class:"hover:tw-bg-primary hover:tw-text-black",onClick:$(k,["stop"])},{default:a(()=>[e(I,null,{default:a(()=>[e(B,null,{default:a(()=>[Ye]),_:1})]),_:1})]),_:1},8,["onClick"])),[[D]]),Q((w(),j(q,{clickable:"",class:"hover:tw-bg-primary hover:tw-text-black",onClick:i[5]||(i[5]=$(s=>p.value=!0,["stop"]))},{default:a(()=>[e(I,null,{default:a(()=>[e(B,null,{default:a(()=>[Ge]),_:1})]),_:1})]),_:1})),[[D]])]),_:1})]),_:1},8,["modelValue"]),e(J,{modelValue:c.value,"onUpdate:modelValue":i[8]||(i[8]=s=>c.value=s)},{default:a(()=>[e(O,{class:"tw-w-[400px] tw-max-w-full"},{default:a(()=>[e(E,null,{default:a(()=>[He]),_:1}),e(E,{class:"q-pt-none"},{default:a(()=>[g.value?(w(),j(Re,{key:0,type:"rect"})):(w(),j(F,{key:1,modelValue:f.value,"onUpdate:modelValue":i[7]||(i[7]=s=>f.value=s),dark:"",borderless:"",readonly:!0},{append:a(()=>[e(z,{name:"file_copy",class:"tw-cursor-pointer",onClick:r})]),_:1},8,["modelValue"]))]),_:1}),e(se,{align:"right"},{default:a(()=>[Q(e(C,{flat:"",label:"\u5173\u95ED",color:"primary"},null,512),[[D]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var Ze=P(Ke,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DropdownProjectManage.vue"]]);const et={class:"tw-h-full tw-w-full tw-flex tw-flex-col"},tt={class:"q-pa-md tw-flex tw-justify-around"},ot={key:0,class:"tw-w-full tw-text-center tw-m-auto tw-text-gray-500"},lt=h(" \u6682\u65E0\u6570\u636E "),at=U({setup(o){const t=A(),l=b(()=>t.state.Project.loadingProjects);async function n(){await t.dispatch("Project/fetchProjects")}H(n);const p=y(""),d=b(()=>t.state.Project.projects.filter(r=>r.title.indexOf(p.value)>=0||r.id.toString().indexOf(p.value)>=0));function m(r){return oe().params.projectId===r.id.toString()}const c=y(!1),g=y(!1),f=b(()=>d.value.filter(m).pop()),k=b(()=>t.getters.isAdmin);return(r,u)=>{const i=ee("router-link");return w(),_("div",et,[v(f)?(w(),j(re,{key:0,modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=s=>g.value=s),"project-id":v(f).id},null,8,["modelValue","project-id"])):N("v-if",!0),e(ne,{modelValue:c.value,"onUpdate:modelValue":u[1]||(u[1]=s=>c.value=s)},null,8,["modelValue"]),T("div",tt,[e(F,{modelValue:p.value,"onUpdate:modelValue":u[2]||(u[2]=s=>p.value=s),borderless:"",dense:"",debounce:"300",placeholder:"Search"},{append:a(()=>[e(z,{name:"search"})]),_:1},8,["modelValue"]),e(C,{flat:"",dense:"",loading:v(l),icon:"refresh",onClick:n},null,8,["loading"]),e(C,{flat:"",dense:"",icon:"add",onClick:u[3]||(u[3]=s=>c.value=!0)}),e(C,{flat:"",dense:"",class:"tw-text-red-300 lg:tw-flex tw-hidden",icon:"delete",disable:!v(f),onClick:u[4]||(u[4]=s=>g.value=!0)},null,8,["disable"])]),e(xe,{class:"tw-grow tw-px-[15px]",visible:"","thumb-style":v(Fe),"bar-style":v(Se)},{default:a(()=>[e(le,{class:"tw-flex tw-flex-col tw-gap-2 tw-pb-4"},{default:a(()=>[(w(!0),_(M,null,K(v(d),s=>(w(),_("div",{key:s.id,class:te((m(s)?"tw-bg-primary tw-text-black ":"tw-bg-[#27272a] ")+"tw-w-full tw-flex tw-flex-row tw-rounded-md")},[e(i,{class:"tw-grow tw-p-4",to:{name:"project",params:{projectId:s.id}}},{default:a(()=>[h(Z(s.title),1)]),_:2},1032,["to"]),v(k)?(w(),j(Ze,{key:0,"project-id":s.id},null,8,["project-id"])):N("v-if",!0)],2))),128))]),_:1}),!v(l)&&(!v(d)||v(d).length===0)?(w(),_("div",ot,[e(z,{name:"outlet",style:{"font-size":"3rem"}}),lt])):N("v-if",!0)]),_:1},8,["thumb-style","bar-style"])])}}});var st=P(at,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/ProjectList.vue"]]);const rt={class:"lg:tw-flex lg:tw-flex-row tw-w-full tw-h-full"},nt=U({setup(o){const t=oe(),l=b(()=>t.name&&t.name.toString()!=="projects"?"tw-hidden lg:tw-block":"");return(n,p)=>{const d=ee("router-view");return w(),_("div",rt,[T("div",{class:te("xl:tw-basis-1/5 tw-basis-1/4 tw-h-full tw-w-full tw-min-w-[280px] "+v(l))},[e(st)],2),e(d)])}}});var Qt=P(nt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/ProjectList.vue"]]);export{Qt as default};

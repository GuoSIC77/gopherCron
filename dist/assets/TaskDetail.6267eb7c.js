var Ye=Object.defineProperty;var Ce=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var xe=(F,t,p)=>t in F?Ye(F,t,{enumerable:!0,configurable:!0,writable:!0,value:p}):F[t]=p,Ve=(F,t)=>{for(var p in t||(t={}))He.call(t,p)&&xe(F,p,t[p]);if(Ce)for(var p of Ce(t))Ke.call(t,p)&&xe(F,p,t[p]);return F};import{_ as X,u as Z,r as g,o as w,c as $,w as o,a as e,b as A,t as R,d as h,Q as L,e as ye,f as _,g as We,h as x,i as oe,j as Je,k as se,l as j,m as G,n as ke,p as B,q as pe,s as De,v as Ge,x as J,C as re,y as Xe,z as Se,A as s,B as fe,D as be,E as Ze,F as Fe,G as et,H as Ee,I as ue,J as Ie,K as U,L as Ae,M as je,N as tt,O as Ue,P as Re,R as lt,S as Pe,T as le,U as z,V as at,W as Qe,X as H,Y as ee,Z as ut,$ as ot,a0 as st,a1 as rt,a2 as nt,a3 as Be,a4 as Te,a5 as me,a6 as it,a7 as $e,a8 as qe}from"./index.d883e21d.js";import{u as dt}from"./index.6779c653.js";import{C as ae}from"./Confirm.133db999.js";import{a as ct,f as ne}from"./datetime.561112b0.js";import{T as te}from"./task.f3ffd066.js";import{J as Ne}from"./JSONViewer.e026737f.js";import{G as mt}from"./log.7d807971.js";import{t as pt,b as ft}from"./thumbStyle.856de4cb.js";const vt=A("br",null,null,-1),wt=A("br",null,null,-1),gt=h(" \u63D0\u4EA4 "),kt={props:{projectId:{type:Number,required:!0},clientIp:{type:String,required:!0},version:{type:String,required:!0},weight:{type:Number,required:!0},region:{type:String,required:!0}},setup(F){const t=F,p=Z(),f=g(t.weight),k=g(!1);async function m(){k.value=!0;const d=t.clientIp.split(":")[0];try{await Je(t.projectId,d,Number(f.value)),await p.dispatch("Project/fetchProjectClients",{projectId:t.projectId}),p.commit("success",{message:"\u4FEE\u6539\u6210\u529F"})}catch(l){console.error(l)}k.value=!1}return(d,l)=>(w(),$(oe,{flat:"",bordered:""},{default:o(()=>[e(L,{class:"text-center"},{default:o(()=>[A("strong",null,R(F.clientIp),1),vt,h(" "+R(F.region)+" ",1),wt,h(" "+R(F.version),1)]),_:1}),e(ye),e(L,{class:"flex flex-center"},{default:o(()=>[e(_,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=T=>f.value=T),outlined:"",dense:"",type:"number",prefix:"\u6743\u91CD\uFF1A",onKeyup:We(m,["enter"])},{append:o(()=>[e(x,{dense:"",unelevated:"",loading:k.value,onClick:m},{default:o(()=>[gt]),_:1},8,["loading"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1}))}};var yt=X(kt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/ClientNode.vue"]]);const bt=A("div",{class:"text-h6"},"\u521B\u5EFA\u4EFB\u52A1",-1),Ft=A("div",{class:"text-base"}," \u4E34\u65F6\u4EFB\u52A1\u540C\u6837\u4F1A\u4E0E\u6B63\u5F0F\u7684\u5B9A\u65F6\u4EFB\u52A1\u7ADE\u4E89\u76F8\u540C\u7684\u9501\uFF0C\u8BF7\u907F\u514D\u8C03\u5EA6\u51B2\u7A81(\u6307\u8FD0\u884C\u65F6\u95F4\u6709\u4EA4\u96C6) ",-1),Et={class:"tw-flex tw-gap-2 tw-justify-end tw-mb-2"},It={class:"row items-center justify-end"},jt={class:"row items-center justify-end"},_t=se({props:{modelValue:{type:Boolean,default:!1},task:{type:Object,default:()=>({})}},emits:["update:modelValue","created"],setup(F,{emit:t}){const p=F,f=j({get:()=>p.modelValue,set:y=>{t("update:modelValue",y),l.value=""}}),k=j(()=>{const y=[{value:"",label:"\u968F\u673A"}],c=m.state.Project.projectClients.get(p.task.projectId);return c&&c.forEach((r,Q,I)=>{const V=r.clientIP;y.push({value:V,label:V})}),y}),m=Z(),d=g({taskId:p.task.taskId,projectId:p.task.projectId,command:p.task.command,remark:p.task.remark,noseize:p.task.noseize,scheduleTime:0,timeout:p.task.timeout,host:p.task.host}),l=g("");function T(y){l.value=ct(y*60,"YYYY-MM-DD HH:mm")}G(()=>{ke(()=>{f.value&&(d.value=Object.assign({},{taskId:p.task.taskId,projectId:p.task.projectId,command:p.task.command,remark:p.task.remark,noseize:p.task.noseize,scheduleTime:0,timeout:p.task.timeout,host:p.task.host}))})});const S=g(!1);async function C(){const y=d.value;if(!y.remark){m.commit("error",{error:{message:"\u4EFB\u52A1\u8BF4\u660E\u5FC5\u586B"}});return}if(!y.command){m.commit("error",{error:{message:"\u6267\u884C\u547D\u4EE4\u5FC5\u586B"}});return}S.value=!0;try{const c=await et({projectId:y.projectId,taskId:y.taskId,command:y.command,noseize:y.noseize,scheduleTime:Date.parse(l.value)/1e3,remark:y.remark,timeout:y.timeout,host:y.host});c.code!==0?m.commit("error",{error:{message:c.message}}):(m.commit("success",{message:"\u521B\u5EFA\u6210\u529F"}),f.value=!1,t("created"))}catch{}S.value=!1}return(y,c)=>(w(),$(Fe,{modelValue:s(f),"onUpdate:modelValue":c[11]||(c[11]=r=>Ze(f)?f.value=r:null),persistent:""},{default:o(()=>[e(oe,{class:"tw-w-96 q-pa-sm"},{default:o(()=>[e(L,null,{default:o(()=>[bt,Ft]),_:1}),e(L,{style:{"max-height":"50vh"},class:"scroll"},{default:o(()=>[F.task?(w(),$(_,{key:"id","model-value":F.task.taskId,disable:"",label:"\u5173\u8054\u4EFB\u52A1 ID",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),e(_,{key:"remark",modelValue:d.value.remark,"onUpdate:modelValue":c[0]||(c[0]=r=>d.value.remark=r),type:"textarea",label:"\u4EFB\u52A1\u8BF4\u660E *",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),A("div",Et,[e(x,{dense:"",unelevated:"",class:"tw-text-xs tw-h-6 tw-px-3",color:"warning","text-color":"black",label:"\u4E00\u5206\u949F\u540E",onClick:c[1]||(c[1]=r=>T(1))}),e(x,{dense:"",unelevated:"",class:"tw-text-xs tw-h-6 tw-px-3",color:"warning","text-color":"black",label:"\u4E94\u5206\u949F\u540E",onClick:c[2]||(c[2]=r=>T(5))}),e(x,{dense:"",unelevated:"",class:"tw-text-xs tw-h-6 tw-px-3",color:"warning","text-color":"black",label:"\u4E00\u5C0F\u65F6\u540E",onClick:c[3]||(c[3]=r=>T(60))})]),e(_,{modelValue:l.value,"onUpdate:modelValue":c[6]||(c[6]=r=>l.value=r),filled:"",square:"",label:"\u8C03\u5EA6\u65F6\u95F4 *",class:"tw-mb-4"},{prepend:o(()=>[e(pe,{name:"event",class:"cursor-pointer"},{default:o(()=>[e(De,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(Ge,{modelValue:l.value,"onUpdate:modelValue":c[4]||(c[4]=r=>l.value=r),"text-color":"black",mask:"YYYY-MM-DD HH:mm"},{default:o(()=>[A("div",It,[J(e(x,{label:"\u5173\u95ED",color:"primary",flat:""},null,512),[[re,!0]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:o(()=>[e(pe,{name:"access_time",class:"cursor-pointer"},{default:o(()=>[e(De,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(Xe,{modelValue:l.value,"onUpdate:modelValue":c[5]||(c[5]=r=>l.value=r),mask:"YYYY-MM-DD HH:mm","text-color":"black",format24h:""},{default:o(()=>[A("div",jt,[J(e(x,{label:"\u5173\u95ED",color:"primary",flat:""},null,512),[[re,!0]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(_,{key:"timeout",modelValue:d.value.timeout,"onUpdate:modelValue":c[7]||(c[7]=r=>d.value.timeout=r),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 * (\u5355\u4F4D:\u79D2 s)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"command",modelValue:d.value.command,"onUpdate:modelValue":c[8]||(c[8]=r=>d.value.command=r),placeholder:'echo "hello word"',type:"textarea",label:"\u6267\u884C\u6307\u4EE4 *",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(Se,{modelValue:d.value.host,"onUpdate:modelValue":c[9]||(c[9]=r=>d.value.host=r),"emit-value":"","map-options":"",autogrow:"",square:"",filled:"",label:"\u6267\u884C\u8282\u70B9",options:s(k),class:"tw-mb-4"},null,8,["modelValue","options"]),e(fe,{key:"noseize",modelValue:d.value.noseize,"onUpdate:modelValue":c[10]||(c[10]=r=>d.value.noseize=r),"false-value":0,"true-value":1,label:"\u5E76\u884C\u8C03\u5EA6",class:"tw-mb-4"},null,8,["modelValue"])]),_:1}),e(be,{align:"right",class:"tw-flex tw-gap-2 tw-flex-col-reverse lg:tw-flex-row tw-justify-center lg:tw-justify-end"},{default:o(()=>[J(e(x,{flat:"",label:"\u53D6\u6D88",class:"lg:tw-w-24 tw-w-full"},null,512),[[re,!0]]),e(x,{color:"primary","text-color":"black",label:"\u521B\u5EFA",class:"lg:tw-w-24 tw-w-full !tw-ml-0",loading:S.value,onClick:C},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var ze=X(_t,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogTemporaryTaskForm.vue"]]);const ht={class:"tw-h-full tw-w-full tw-flex tw-flex-col"},Ct={key:0,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-2"},xt=h("\u7ED3\u675F\u8FDB\u7A0B"),Vt=h("\u7ACB\u5373\u6267\u884C"),Dt=h("\u4E34\u65F6\u8C03\u5EA6 "),At=h(" \u6307\u5B9A\u65F6\u95F4\u8C03\u5EA6\u4E00\u6B21\u7684\u4EFB\u52A1 "),Bt=h("\u590D\u5236\u4EFB\u52A1 "),Tt=h(" \u4EE5\u5F53\u524D\u4EFB\u52A1\u5185\u5BB9\u4E3A\u57FA\u7840\u8FDB\u884C\u65B0\u4EFB\u52A1\u7684\u521B\u5EFA "),$t={key:1,class:"tw-flex tw-pb-3 tw-flex-wrap tw-gap-2 text-h6"},qt={class:"q-pa-sm"},St=se({props:{id:{type:String,default:""},projectId:{type:Number,required:!0}},setup(F){const t=F;function p(){N.push({name:"temporary_tasks",params:{projectId:t.projectId}})}const f=j(()=>({id:"",name:"",projectId:t.projectId,command:"",cronExpr:"0 0 0 * * * *",remark:"",timeout:300,createTime:0,status:0,isRunning:-1,noseize:0,exclusion:0,clientIp:"",tmpId:""}));function k(i,n){return!i||!n?!1:i.projectId===n.projectId&&i.name===n.name&&i.cronExpr===n.cronExpr&&i.remark===n.remark&&i.timeout===n.timeout&&i.status===n.status&&i.noseize===n.noseize&&i.command===n.command}const m=Z(),d=Ee(),l=j(()=>{var n;const i=(n=m.state.Task.tasks.get(t.projectId))==null?void 0:n.find(D=>D.id===t.id||D.id===d.query.copyid);if(d.query.copyid&&i){const D=JSON.parse(JSON.stringify(i));return D.isRunning=-1,D.id="",D}return i}),T=g();function S(i){T.value={command:i.command,createTime:i.createTime,projectId:i.projectId,scheduleTime:0,taskId:i.id,userId:0,userName:"",noseize:0,timeout:i.timeout,remark:"",host:"",isRunning:-1,tmpId:""}}l.value&&S(l.value);const C=j(()=>m.state.Project.projects.find(i=>i.id===t.projectId)),y=g([]);function c(i){const n=[];i==null||i.forEach((D,W,ge)=>{n.push({value:D.id,label:D.title})}),y.value=n}m.state.Project.projects&&m.state.Project.projects.length>0&&c(m.state.Project.projects),ue(()=>m.state.Project.projects,(i,n)=>{c(n)});const r=g(Object.assign({},l.value||f.value)),Q=j(()=>d.name&&d.name.toString()==="create_crontab_task"),I=j(()=>d.query.copyid&&d.query.copyid!=="");ue(()=>t.id,(i,n)=>{var D;(t.id!==((D=l.value)==null?void 0:D.id)||!Q.value&&r.value.id===""||r.value.id!==l.value.id)&&(r.value=Object.assign({},l.value||f.value)),r.value.isRunning=-1,l.value&&S(l.value)});const V=j(()=>{var i;return((i=l.value)==null?void 0:i.isRunning)===1?!1:!k(l.value,r.value)}),M=j(()=>{const{name:i,command:n,timeout:D,cronExpr:W}=r.value;return i!==""&&n!==""&&D>0&&W!==""}),O=j(()=>{const{name:i,command:n,timeout:D,cronExpr:W}=r.value;return i===""?"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A":n===""?"\u6267\u884C\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A":D<=0?"\u8D85\u65F6\u65F6\u95F4\u672A\u6307\u5B9A":W===""?"\u8C03\u5EA6\u8BA1\u5212\u672A\u6307\u5B9A":""});async function b(i){await m.dispatch("Task/fetchTasks",{projectId:i})}const N=Ie(),P=g(!1);async function a(){if(m.commit("cleanError"),!M.value){m.commit("error",{error:{message:O.value}});return}P.value=!0,(Q.value||I.value)&&(r.value.id="");try{const i=await m.dispatch("saveTask",{task:JSON.parse(JSON.stringify(r.value))});Q.value&&(await b(r.value.projectId),N.push({name:"crontab_task",params:{projectId:r.value.projectId,taskId:i.id}}))}catch(i){console.error(i)}P.value=!1}function u(){r.value=Object.assign({},l.value||f.value)}const v=g(!1),Y=g(!1);async function ie(i,n){m.commit("cleanError"),Y.value=!0;try{await m.dispatch("deleteTask",{projectId:i,taskId:n}),m.state.Root.currentError===void 0&&(await b(t.projectId),N.push({name:"crontab_tasks",params:{projectId:t.projectId}}),v.value=!1)}catch(D){console.error(D),m.commit("error",{error:D})}Y.value=!1}const de=j(()=>K.value?!0:l.value.isRunning===1),K=g(!1),q=g(!1);async function Oe(i,n){q.value=!1,K.value=!0;try{await tt(m.getters.apiv1,i,n)}catch(D){console.error(D)}K.value=!1}G(()=>{m.watch(i=>[i.Root.eventTask],([i])=>{!i||i.projectId!==t.projectId||i.taskId!==t.id||te.isFinished(i.status)&&(K.value=!1)})});const ve=g(!1),ce=g(!1),Me=async()=>{ce.value=!1,ve.value=!0;try{await Ue({projectId:t.projectId,taskId:t.id}),await b(t.projectId),r.value.status=0}catch(i){console.error(i),m.commit("error",{error:i})}ve.value=!1},we=g(!1);function Le(){var i;N.push({name:"create_crontab_task",query:{copyid:(i=l.value)==null?void 0:i.id}})}return(i,n)=>{var D,W,ge,_e,he;return w(),U("div",ht,[e(ze,{modelValue:we.value,"onUpdate:modelValue":n[0]||(n[0]=E=>we.value=E),task:T.value,onCreated:p},null,8,["modelValue","task"]),e(ae,{modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=E=>v.value=E),content:"\u662F\u5426\u8981\u5220\u9664\u4EFB\u52A1"+((D=s(l))==null?void 0:D.name)+"?",type:"warning",loading:Y.value,onConfirm:n[2]||(n[2]=E=>s(C)&&s(l)&&ie(s(C).id,s(l).id))},null,8,["modelValue","content","loading"]),e(ae,{modelValue:ce.value,"onUpdate:modelValue":n[3]||(n[3]=E=>ce.value=E),content:"\u786E\u5B9A\u8981\u7ED3\u675F\u8FDB\u7A0B\u5417\uFF1F\u5F3A\u5236\u7ED3\u675F\u540E\u4EFB\u52A1\u7684\u542F\u7528\u72B6\u6001\u4F1A\u81EA\u52A8\u53D8\u66F4\u4E3A\u505C\u7528\u72B6\u6001\u3002",type:"warning",onConfirm:Me},null,8,["modelValue"]),e(ae,{modelValue:q.value,"onUpdate:modelValue":n[4]||(n[4]=E=>q.value=E),content:"\u786E\u5B9A\u8981\u7ACB\u5373\u6267\u884C\u5417\uFF1F",onConfirm:n[5]||(n[5]=E=>s(l)&&Oe(F.projectId,s(l).id))},null,8,["modelValue"]),s(Q)?B("v-if",!0):(w(),U("div",Ct,[e(x,{flat:"",dense:"",class:"tw-w-24 tw-text-red-300 lg:tw-hidden",icon:"delete",onClick:n[6]||(n[6]=E=>v.value=!0)}),((W=s(l))==null?void 0:W.isRunning)===1?(w(),$(x,{key:0,flat:"","text-color":"red",disable:((ge=s(l))==null?void 0:ge.isRunning)!==1,class:"tw-w-24 tw-ml-1",loading:ve.value,onClick:n[7]||(n[7]=E=>ce.value=!0)},{default:o(()=>[xt]),_:1},8,["disable","loading"])):B("v-if",!0),e(x,{color:"primary","text-color":"black",disable:s(V)||((_e=s(l))==null?void 0:_e.isRunning)===1,class:"tw-w-24",loading:s(de)||((he=s(l))==null?void 0:he.isRunning)===1,onClick:n[8]||(n[8]=E=>q.value=!0)},{default:o(()=>[Vt]),_:1},8,["disable","loading"]),e(x,{color:"warning","text-color":"black",class:"tw-w-24 tw-opacity-90",onClick:n[9]||(n[9]=E=>we.value=!0)},{default:o(()=>[Dt,e(Ae,{class:"bg-warning tw-text-black",offset:[10,10]},{default:o(()=>[At]),_:1})]),_:1}),e(x,{outline:"",class:"tw-w-24 tw-opacity-90",onClick:Le},{default:o(()=>[Bt,e(Ae,{class:"bg-warning tw-text-black",offset:[10,10]},{default:o(()=>[Tt]),_:1})]),_:1})])),s(I)?(w(),U("div",$t," \u590D\u5236\u4EFB\u52A1 ")):B("v-if",!0),e(je,{class:"tw-w-full",onSubmit:a,onReset:u},{default:o(()=>[s(l)&&!s(Q)?(w(),$(_,{key:"id","model-value":s(l).id,disable:"",label:"\u4EFB\u52A1 ID",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),s(Q)?(w(),$(Se,{key:1,modelValue:r.value.projectId,"onUpdate:modelValue":n[10]||(n[10]=E=>r.value.projectId=E),filled:"",class:"tw-w-full tw-mb-4","emit-value":"","map-options":"",label:"\u6240\u5C5E\u9879\u76EE",placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",options:y.value},null,8,["modelValue","options"])):(w(),$(_,{key:"project","model-value":s(C)?s(C).title:"",disable:"",label:"\u6240\u5C5E\u9879\u76EE",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])),e(_,{key:"name",modelValue:r.value.name,"onUpdate:modelValue":n[11]||(n[11]=E=>r.value.name=E),label:"\u4EFB\u52A1\u540D\u79F0",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"cron",modelValue:r.value.cronExpr,"onUpdate:modelValue":n[12]||(n[12]=E=>r.value.cronExpr=E),label:"\u8C03\u5EA6\u8BA1\u5212 (*\u79D2 *\u5206 *\u65F6 *\u65E5 *\u6708 *\u5468 *\u5E74)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"timeout",modelValue:r.value.timeout,"onUpdate:modelValue":n[13]||(n[13]=E=>r.value.timeout=E),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 (\u5355\u4F4D:\u79D2 s)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"command",modelValue:r.value.command,"onUpdate:modelValue":n[14]||(n[14]=E=>r.value.command=E),placeholder:'echo "hello word"',type:"textarea",label:"\u6267\u884C\u6307\u4EE4",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"remark",modelValue:r.value.remark,"onUpdate:modelValue":n[15]||(n[15]=E=>r.value.remark=E),type:"textarea",label:"\u4EFB\u52A1\u5907\u6CE8",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(fe,{key:"noseize",modelValue:r.value.noseize,"onUpdate:modelValue":n[16]||(n[16]=E=>r.value.noseize=E),"false-value":0,"true-value":1,label:"\u5E76\u884C\u8C03\u5EA6",class:"tw-mb-4"},null,8,["modelValue"]),e(fe,{key:"status",modelValue:r.value.status,"onUpdate:modelValue":n[17]||(n[17]=E=>r.value.status=E),"false-value":0,"true-value":1,label:"\u662F\u5426\u542F\u7528",class:"tw-mb-4"},null,8,["modelValue"]),A("div",qt,[e(x,{color:"primary","text-color":"black",type:"submit",label:s(I)?"\u786E\u8BA4\u590D\u5236":"\u4FDD\u5B58",disable:!s(V),loading:P.value,class:"lg:tw-w-24 tw-w-full lg:tw-mr-4 lg:tw-mb-0 tw-mb-4"},null,8,["label","disable","loading"]),e(x,{color:"primary",type:"reset",label:"\u91CD\u7F6E",flat:"",disable:!s(V),class:"lg:tw-w-24 tw-w-full"},null,8,["disable"])])]),_:1})])}}});var Ut=X(St,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/TaskDetail.vue"]]);const Rt=h("\u8282\u70B9 IP"),Pt=h("\u5F00\u59CB\u65F6\u95F4"),Qt=h("\u7ED3\u675F\u65F6\u95F4"),Nt=se({props:{id:{type:String,required:!0},projectId:{type:Number,required:!0}},emits:["onpage"],setup(F,{emit:t}){const p=F,f=Z(),k=j(()=>f.state.Root.taskLogs),m=j(()=>f.state.Root.taskLogsTotal),d=j(()=>f.state.Root.loadingTaskLogs),l=g({sortBy:"",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),T=g();G(()=>{Re(()=>{var C;(C=T.value)==null||C.$el.querySelector("table.q-table").classList.add("tw-table-fixed")})});function S({pagination:{page:C,rowsPerPage:y}}){const c=l.value;c.page=C,c.rowsPerPage=y,t("onpage")}return ke(()=>{const C=l.value;C.rowsNumber=m.value}),G(async()=>{ke(async()=>{const C=l.value;await f.dispatch("fetchTaskLogs",{projectId:p.projectId,taskId:p.id,page:C.page,pageSize:C.rowsPerPage})})}),(C,y)=>(w(),$(s(at),{ref_key:"logTable",ref:T,pagination:l.value,"onUpdate:pagination":y[0]||(y[0]=c=>l.value=c),class:"tw-w-full tw-h-full tw-bg-[#121212]","rows-per-page-options":[5,10,15],rows:s(k),loading:s(d),"row-key":"id",color:"primary",flat:"","hide-header":"",onRequest:S},{loading:o(()=>[e(lt,{showing:"",color:"primary"})]),body:o(c=>[e(oe,{class:"tw-my-4 tw-x-full",flat:"",bordered:""},{default:o(()=>[e(Pe,null,{default:o(()=>[e(le,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Rt]),_:1}),e(z,null,{default:o(()=>[h(R(c.row.clientIp),1)]),_:2},1024)]),_:2},1024),e(le,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Pt]),_:1}),e(z,null,{default:o(()=>[h(R(s(ne)(c.row.startTime*1e3)),1)]),_:2},1024)]),_:2},1024),e(le,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Qt]),_:1}),e(z,null,{default:o(()=>[h(R(s(ne)(c.row.endTime*1e3)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(ye),e(L,{class:"tw-w-full tw-overflow-x-auto"},{default:o(()=>[e(Ne,{json:c.row.result},null,8,["json"])]),_:2},1024)]),_:2},1024)]),_:1},8,["pagination","rows","loading"]))}});var zt=X(Nt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/TaskLogs.vue"]]);const Ot=h("\u8282\u70B9 IP"),Mt=h("\u5F00\u59CB\u65F6\u95F4"),Lt=h("\u7ED3\u675F\u65F6\u95F4"),Yt={key:1,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-2"},Ht={key:2,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-2"},Kt=h("\u5220\u9664\u4EFB\u52A1"),Wt=h("\u7ED3\u675F\u8FDB\u7A0B"),Jt=h("\u590D\u5236\u4EFB\u52A1"),Gt={key:3},Xt=se({props:{id:{type:Number,default:0,required:!0},projectId:{type:Number,required:!0}},setup(F){const t=F,p=g(!1),f=g();function k(a){f.value={taskId:a.taskId,projectId:a.projectId,remark:a.remark,command:a.command,timeout:a.timeout,host:a.host,createTime:0,isRunning:0,noseize:0,tmpId:"",scheduleTime:0,userId:0,userName:""}}const m=g(),d=Z(),l=g();function T(){var a;l.value=(a=d.state.Task.temporaryTasks.get(t.projectId))==null?void 0:a.find(u=>u.id===Number(t.id))}ue(()=>t.id,(a,u)=>{console.log("watched",a,u),T()}),ue(l,(a,u)=>{console.log("watched task",a,u),(!m.value||(a==null?void 0:a.tmpId)!==(u==null?void 0:u.tmpId))&&P()});function S(){l.value?(k(l.value),p.value=!0):console.error("failed to copy task, the task is not found")}const C=j(()=>d.state.Project.projects.find(a=>a.id===t.projectId));async function y(){try{await d.dispatch("Task/fetchTemporaryTasks",{projectId:t.projectId})}catch(a){console.error("failed to dispatch fetchTemporaryTasks",a)}}G(()=>{d.watch(a=>[a.Root.eventTask],async([a])=>{var u;!a||a.projectId!==t.projectId||a.tmpId!==((u=l.value)==null?void 0:u.tmpId)||!m.value&&te.isFinished(a.status)&&P()}),T()});const c=g(!1),r=g(!1),Q=async()=>{if(!!l.value){r.value=!1,c.value=!0;try{await Ue({projectId:t.projectId,taskId:l.value.taskId}),await y()}catch(a){console.log(a)}c.value=!1}},I=g(!1),V=g(!1),M=Ie(),O=async()=>{V.value=!1,I.value=!0;try{await ut(Number(t.id)),await y(),M.back()}catch(a){console.log(a)}I.value=!1},b=g(!0);function N(a=500){let u=!1,v=!1;return b.value=!0,setTimeout(()=>{v=!0,u&&(b.value=!1)},a),()=>{u=!0,v&&(b.value=!1)}}async function P(){if(!l.value)return;const a=N(500);m.value=null;try{m.value=await mt({taskId:l.value.taskId,projectId:l.value.projectId,tmpId:l.value.tmpId})}catch(u){console.error(u)}a()}return(a,u)=>{var v,Y,ie,de,K;return w(),U(ee,null,[e(ze,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=q=>p.value=q),task:f.value,onCreated:y},null,8,["modelValue","task"]),e(ae,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=q=>r.value=q),content:"\u786E\u5B9A\u8981\u7ED3\u675F\u8FDB\u7A0B\u5417\uFF1F",type:"warning",onConfirm:Q},null,8,["modelValue"]),e(ae,{modelValue:V.value,"onUpdate:modelValue":u[2]||(u[2]=q=>V.value=q),content:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u4E34\u65F6\u4EFB\u52A1\u5417\uFF1F",type:"warning",onConfirm:O},null,8,["modelValue"]),J(e(H,{type:"QInput",class:"tw-h-52 tw-mb-4",animation:"fade"},null,512),[[Qe,b.value]]),!b.value&&m.value?(w(),$(oe,{key:0,class:"tw-mb-4",flat:"",bordered:""},{default:o(()=>[e(Pe,null,{default:o(()=>[e(le,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Ot]),_:1}),e(z,null,{default:o(()=>[h(R(m.value.clientIp),1)]),_:1})]),_:1}),e(le,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Mt]),_:1}),e(z,null,{default:o(()=>[h(R(s(ne)(m.value.startTime*1e3)),1)]),_:1})]),_:1}),e(le,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Lt]),_:1}),e(z,null,{default:o(()=>[h(R(s(ne)(m.value.endTime*1e3)),1)]),_:1})]),_:1})]),_:1}),e(ye),e(L,{class:"tw-w-full tw-overflow-x-auto"},{default:o(()=>[e(Ne,{json:m.value.result},null,8,["json"])]),_:1})]),_:1})):B("v-if",!0),b.value?(w(),U("div",Yt,[e(H,{type:"QBtn",animation:"fade"})])):B("v-if",!0),b.value?B("v-if",!0):(w(),U("div",Ht,[(v=l.value)!=null&&v.isRunning?(w(),$(x,{key:0,loading:!0})):B("v-if",!0),((Y=l.value)==null?void 0:Y.isRunning)!==1&&!((ie=m.value)!=null&&ie.result)?(w(),$(x,{key:1,"text-color":"red",outline:"",class:"tw-w-24 tw-ml-1",loading:I.value,onClick:u[3]||(u[3]=q=>V.value=!0)},{default:o(()=>[Kt]),_:1},8,["loading"])):B("v-if",!0),((de=l.value)==null?void 0:de.isRunning)===1?(w(),$(x,{key:2,outline:"","text-color":"red",disable:((K=l.value)==null?void 0:K.isRunning)!==1,class:"tw-w-24 tw-ml-1",loading:c.value,onClick:u[4]||(u[4]=q=>r.value=!0)},{default:o(()=>[Wt]),_:1},8,["disable","loading"])):B("v-if",!0),e(x,{outline:"",class:"tw-w-24 tw-ml-1",onClick:S},{default:o(()=>[Jt]),_:1})])),b.value?(w(),U("div",Gt,[e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"})])):B("v-if",!0),!b.value&&l.value?(w(),$(je,{key:4,class:"tw-w-full"},{default:o(()=>[l.value?(w(),$(_,{key:"id","model-value":l.value.taskId+" - "+l.value.tmpId,disable:"",label:"\u4EFB\u52A1 ID\uFF08task_id - tmp_id\uFF09",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),e(_,{key:"project","model-value":s(C)?s(C).title:"",disable:"",label:"\u6240\u5C5E\u9879\u76EE",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(_,{key:"remark",modelValue:l.value.remark,"onUpdate:modelValue":u[5]||(u[5]=q=>l.value.remark=q),type:"textarea",label:"\u4EFB\u52A1\u5907\u6CE8",autogrow:"",disable:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"cron","model-value":s(ne)(l.value.scheduleTime*1e3,"YYYY-MM-DD HH:mm"),label:"\u8C03\u5EA6\u65F6\u95F4",square:"",disable:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(_,{key:"timeout",modelValue:l.value.timeout,"onUpdate:modelValue":u[6]||(u[6]=q=>l.value.timeout=q),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 (\u5355\u4F4D:\u79D2 s)",square:"",disable:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"command",modelValue:l.value.command,"onUpdate:modelValue":u[7]||(u[7]=q=>l.value.command=q),placeholder:'echo "hello word"',type:"textarea",label:"\u6267\u884C\u6307\u4EE4",autogrow:"",disable:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"timeout","model-value":l.value.host||"\u968F\u673A",label:"\u6307\u5B9A\u6267\u884C\u8282\u70B9",square:"",disable:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(_,{key:"noseize","model-value":l.value.noseize===1?"\u662F":"\u5426",type:"textarea",label:"\u5E76\u884C\u8C03\u5EA6",autogrow:"",disable:"",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])]),_:1})):B("v-if",!0)],64)}}});var Zt=X(Xt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/TemporaryTaskDetail.vue"]]);const el={class:"q-ml-sm"},tl={key:0,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-1"},ll=h(" \u6267\u884C "),al={class:"q-pa-sm"},ul=se({props:{id:{type:String,default:""},projectId:{type:Number,required:!0}},setup(F){const t=F,p=j(()=>({id:"",name:"",projectId:t.projectId,command:"",remark:"",timeout:300,createTime:0,noseize:0})),f=Z(),k=j(()=>{var a;return(a=f.state.WorkFlowTask.tasks.get(t.projectId))==null?void 0:a.find(u=>u.id===t.id)}),m=j(()=>f.state.Project.projects.find(a=>a.id===t.projectId)),d=g(Object.assign({},k.value||p.value));ue(()=>t.id,(a,u)=>{var v;(t.id!==((v=k.value)==null?void 0:v.id)||!O.value&&d.value.id===""||d.value.id!==k.value.id)&&(d.value=Object.assign({},k.value||p.value))});const l=g(!0);ue(k,()=>{l.value&&(l.value=!1,d.value=Object.assign({},k.value||p.value))});const T=j(()=>JSON.stringify(k.value)!==JSON.stringify(d.value)),S=j(()=>{const{name:a,command:u,timeout:v}=d.value;return a!==""&&u!==""&&v>0}),C=j(()=>{const{name:a,command:u,timeout:v}=d.value;return a===""?"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A":u===""?"\u6267\u884C\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A":v<=0?"\u8D85\u65F6\u65F6\u95F4\u672A\u6307\u5B9A":""}),y=Ie(),c=g(!1);async function r(){c.value=!0;try{if(f.commit("cleanError"),!S.value){f.commit("error",{error:{message:C.value}});return}if(await f.dispatch("saveWorkFlowTask",{task:d.value}),l.value=!0,await f.dispatch("WorkFlowTask/fetchTasks",{projectId:t.projectId}),O.value){const a=Object.assign([],f.state.WorkFlowTask.tasks.get(t.projectId)||[]);a.sort((v,Y)=>v.createTime-Y.createTime);const u=a[a.length-1];y.push({name:"workflow_task",params:{projectId:t.projectId,taskId:u.id}})}}catch(a){console.error(a),f.commit("error",{error:a})}c.value=!1}function Q(){d.value=Object.assign({},k.value||p.value)}const I=g(!1);async function V(a,u){f.commit("cleanError"),await f.dispatch("deleteWorkFlowTask",{projectId:a,taskId:u}),f.state.Root.currentError===void 0&&(f.dispatch("WorkFlowTask/fetchTasks",Ve({},t)),y.push({name:"workflow_tasks"}),I.value=!1)}const M=Ee(),O=j(()=>M.name&&M.name.toString()==="create_workflow_task"),b=g(!1),N=g(!1);async function P(a,u){N.value=!1,b.value=!0;try{await st(f.getters.apiv1,a,u)}catch(v){b.value=!0,console.error(v)}}return G(()=>{f.watch(a=>[a.Root.eventWorkFlowTask],([a])=>{var u;console.log(a),!(!a||a.projectId!==t.projectId||a.taskId!==t.id)&&(f.commit("notifySuccess",{message:`\u4EFB\u52A1 ${(u=k.value)==null?void 0:u.name} \u5F53\u524D\u72B6\u6001: ${a.status}`}),te.isRunning(a.status)?b.value=!0:te.isFinished(a.status)&&(b.value=!1))}),f.watch(a=>[a.Root.eventTask],([a])=>{var u;!a||a.projectId!==t.projectId||a.taskId!==t.id||(f.commit("notifySuccess",{message:`\u4EFB\u52A1 ${(u=k.value)==null?void 0:u.name} \u5F53\u524D\u72B6\u6001: ${a.status}`}),te.isRunning(a.status)?b.value=!0:te.isFinished(a.status)&&(b.value=!1))})}),(a,u)=>(w(),U(ee,null,[e(Fe,{modelValue:I.value,"onUpdate:modelValue":u[1]||(u[1]=v=>I.value=v)},{default:o(()=>[e(oe,null,{default:o(()=>[e(L,{class:"row items-center"},{default:o(()=>{var v;return[e(ot,{icon:"delete",color:"primary","text-color":"white"}),A("span",el," \u662F\u5426\u8981\u5220\u9664\u4EFB\u52A1 "+R((v=s(k))==null?void 0:v.name),1)]}),_:1}),e(be,{align:"right"},{default:o(()=>[J(e(x,{flat:"",label:"\u53D6\u6D88",color:"primary"},null,512),[[re,!0]]),e(x,{flat:"",label:"\u5220\u9664",color:"red",onClick:u[0]||(u[0]=()=>s(m)&&s(k)&&V(s(m).id,s(k).id))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(O)?B("v-if",!0):(w(),U("div",tl,[e(x,{flat:"",class:"tw-w-24 tw-text-red-300 lg:tw-hidden",icon:"delete",onClick:u[2]||(u[2]=v=>I.value=!0)}),e(x,{color:"primary","text-color":"black",disable:s(T),class:"tw-w-24",loading:b.value,onClick:u[3]||(u[3]=()=>N.value=!0)},{default:o(()=>[ll]),_:1},8,["disable","loading"])])),e(je,{class:"tw-w-full",onSubmit:r,onReset:Q},{default:o(()=>[s(k)?(w(),$(_,{key:"id","model-value":s(k).id,disable:"",label:"\u4EFB\u52A1 ID",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),e(_,{key:"project","model-value":s(m)?s(m).title:"",disable:"",label:"\u6240\u5C5E\u9879\u76EE",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(_,{key:"name",modelValue:d.value.name,"onUpdate:modelValue":u[4]||(u[4]=v=>d.value.name=v),label:"\u4EFB\u52A1\u540D\u79F0",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"timeout",modelValue:d.value.timeout,"onUpdate:modelValue":u[5]||(u[5]=v=>d.value.timeout=v),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 (\u5355\u4F4D:\u79D2 s)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"command",modelValue:d.value.command,"onUpdate:modelValue":u[6]||(u[6]=v=>d.value.command=v),type:"textarea",placeholder:'echo "hello word"',label:"\u6267\u884C\u6307\u4EE4",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(_,{key:"remark",modelValue:d.value.remark,"onUpdate:modelValue":u[7]||(u[7]=v=>d.value.remark=v),type:"textarea",label:"\u4EFB\u52A1\u5907\u6CE8",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(fe,{key:"noseize",modelValue:d.value.noseize,"onUpdate:modelValue":u[8]||(u[8]=v=>d.value.noseize=v),"false-value":0,"true-value":1,label:"\u5E76\u884C\u8C03\u5EA6",class:"tw-mb-4"},null,8,["modelValue"]),A("div",al,[e(x,{color:"primary","text-color":"black",type:"submit",label:"\u4FDD\u5B58",loading:c.value,disable:!s(T),class:"lg:tw-w-24 tw-w-full lg:tw-mr-4 lg:tw-mb-0 tw-mb-4"},null,8,["loading","disable"]),e(x,{color:"primary",type:"reset",label:"\u91CD\u7F6E",flat:"",disable:!s(T),class:"lg:tw-w-24 tw-w-full"},null,8,["disable"])])]),_:1}),e(ae,{modelValue:N.value,"onUpdate:modelValue":u[9]||(u[9]=v=>N.value=v),content:"\u786E\u5B9A\u8981\u7ACB\u5373\u6267\u884C\u5417\uFF1F",onConfirm:u[10]||(u[10]=v=>s(k)&&P(F.projectId,s(k).id))},null,8,["modelValue"])],64))}});var ol=X(ul,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/WorkFlowTaskDetail.vue"]]);const sl={class:"tw-px-4 tw-pt-2 tw-w-full tw-h-full tw-flex tw-flex-col"},rl={class:"tw-text-[#7e7e7e] tw-mb-4"},nl={class:"tw-flex tw-items-center tw-justify-start tw-gap-4 tw-text-lg tw-mb-4"},il={key:0,class:"tw-pb-4"},dl={class:"tw-flex tw-gap-2 tw-items-center"},cl=h(" \u5728\u7EBF\u8282\u70B9: "),ml={class:"tw-flex tw-w-full tw-grow"},pl={class:"tw-h-full tw-w-full tw-flex tw-flex-col"},fl={key:0,class:"tw-hidden lg:tw-block"},vl=A("div",{class:"text-h6"},"\u8282\u70B9\u5217\u8868",-1),wl=A("div",{class:"text-base"},"\u4EC5 v2.4.6 \u53CA\u4EE5\u4E0A\u7248\u672C\u652F\u6301\u6743\u91CD\u53D8\u66F4",-1),gl={class:"tw-text-lg"},kl=se({props:{id:{type:String,default:""},projectId:{type:Number,required:!0},type:{type:String,default:"crontab"}},setup(F){const t=F,p=g(!1);function f(){p.value=!0}const k=Z(),m=j(()=>k.state.Project.projects.find(I=>I.id===t.projectId)),d=Ee(),l=g(),T=()=>{Re(()=>{var I;(I=l.value)==null||I.setScrollPosition("vertical",0)})},S=j(()=>d.name&&d.name.toString()===`create_${t.type}_task`),C=j(()=>{var I;if(S.value)return"detail";if(d.name){const V=d.name.toString();if(V===`${t.type}_task_logs`)return"logs";if(V===`${t.type}_task`)return"detail"}throw new Error(`Unknown route name ${(I=d.name)==null?void 0:I.toString()}`)}),{width:y}=dt();async function c(){await k.dispatch("Project/fetchProjectClients",{projectId:t.projectId})}G(()=>{c()}),rt(()=>{k.commit("Project/setProjectClients",{clients:[]})});const r=j(()=>k.state.Project.projectClients.get(t.projectId)),Q=j(()=>{const I=new Map;return r.value&&r.value.forEach((V,M,O)=>{let b=I.get(V.region);b||(I.set(V.region,[]),b=I.get(V.region)),b==null||b.push(V)}),I});return(I,V)=>{var M,O;return w(),U(ee,null,[A("div",sl,[A("div",rl,[A("div",nl,[A("span",null,[e(pe,{name:"folder"}),h(" "+R((M=s(m))==null?void 0:M.title),1)]),A("span",null," ID: "+R(F.projectId),1)]),s(m)&&s(m).remark.trim()!==""?(w(),U("div",il,R(s(m).remark),1)):B("v-if",!0),A("div",dl,[e(pe,{name:"hive"}),cl,A("span",{class:nt(["tw-font-extrabold",{"tw-text-primary":s(r)&&s(r).length>0,"tw-text-red-500":!s(r)||s(r).length===0}])},R(((O=s(r))==null?void 0:O.length)||0),3),J(A("span",{class:"tw-text-white tw-cursor-pointer",onClick:f},"\u67E5\u770B\u8282\u70B9",512),[[Qe,s(r)&&s(r).length>0]])])]),s(S)?B("v-if",!0):(w(),$(Be,{key:0,"model-value":s(C),"active-color":"primary",align:"left",class:"lg:tw-hidden tw-display"},{default:o(()=>[e(me,{name:"detail",label:"\u8BE6\u60C5",to:{name:`${t.type}_task`,params:{taskId:t.id}},replace:""},null,8,["to"]),e(me,{name:"logs",label:"\u65E5\u5FD7",to:{name:`${t.type}_task_logs`,params:{taskId:t.id}},replace:""},null,8,["to"])]),_:1},8,["model-value"])),A("div",ml,[A("div",pl,[e(s(Te),{ref_key:"scroll",ref:l,class:"tw-grow","thumb-style":s(pt),"bar-style":s(ft)},{default:o(()=>[e(it,{"model-value":s(C),animated:"",vertical:s(y)>=1024,class:"tw-w-full tw-h-full tw-bg-[#121212] tw-p-0 lg:tw-pr-4"},{default:o(()=>[e($e,{name:"detail",class:"tw-px-0"},{default:o(()=>[t.type==="crontab"?(w(),$(Ut,{key:0,id:t.id,"project-id":t.projectId},null,8,["id","project-id"])):t.type==="workflow"?(w(),$(ol,{key:1,id:t.id,"project-id":t.projectId},null,8,["id","project-id"])):B("v-if",!0),t.type==="temporary"?(w(),$(Zt,{key:2,id:Number(t.id),"project-id":t.projectId},null,8,["id","project-id"])):B("v-if",!0)]),_:1}),e($e,{name:"logs",class:"tw-px-0"},{default:o(()=>[e(zt,{id:t.id,"project-id":t.projectId,onOnpage:T},null,8,["id","project-id"])]),_:1})]),_:1},8,["model-value","vertical"])]),_:1},8,["thumb-style","bar-style"])]),t.type!="temporary"?(w(),U("div",fl,[s(S)?B("v-if",!0):(w(),$(Be,{key:0,"model-value":s(C),"active-color":"primary",vertical:"","switch-indicator":"",align:"left"},{default:o(()=>[e(me,{name:"detail",label:"\u8BE6\u60C5",to:{name:`${t.type}_task`,params:{taskId:t.id}},replace:""},null,8,["to"]),e(me,{name:"logs",label:"\u65E5\u5FD7",to:{name:`${t.type}_task_logs`,params:{taskId:t.id}},replace:""},null,8,["to"])]),_:1},8,["model-value"]))])):B("v-if",!0)])]),e(Fe,{modelValue:p.value,"onUpdate:modelValue":V[0]||(V[0]=b=>p.value=b)},{default:o(()=>[e(oe,{class:"tw-w-full"},{default:o(()=>[e(L,null,{default:o(()=>[vl,wl]),_:1}),e(s(Te),{style:{height:"50vh"}},{default:o(()=>[(w(!0),U(ee,null,qe(s(Q),([b,N])=>(w(),U(ee,{key:b},[e(L,null,{default:o(()=>[A("div",gl,"Region: "+R(b),1)]),_:2},1024),e(L,{class:"tw-q-pt-none scroll tw-flex tw-items-center tw-justify-center tw-align-middle tw-gap-2 tw-flex-wrap",style:{"max-height":"60vh"}},{default:o(()=>[(w(!0),U(ee,null,qe(N,P=>(w(),U("div",{key:P.clientIP,class:"md:tw-w-[48%] tw-w-full"},[e(yt,{"client-ip":P.clientIP,weight:P.weight,"project-id":F.projectId,version:P.version,region:P.region},null,8,["client-ip","weight","project-id","version","region"])]))),128))]),_:2},1024)],64))),128))]),_:1}),e(be,{align:"right",class:"text-teal"},{default:o(()=>[J(e(x,{flat:"",label:"OK"},null,512),[[re,!0]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});var xl=X(kl,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/TaskDetail.vue"]]);export{xl as default};

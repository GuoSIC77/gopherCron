import{aa as v,_ as h,k as x,r as f,o as m,K as _,b as t,t as w,A as D,a as n,w as u,h as p,i as I,Q as b,$ as C,D as N,x as j,C as F,F as L,Y as y,d as k,aP as A,u as P,a8 as B,R as $,c as E}from"./index.fc9baa3d.js";async function Q(s){const e=await v.get("/client/list",{params:{oid:s.oid,project_ids:s.projectIDs}}),r=[];return e.data.response&&e.data.response.length>0&&e.data.response.forEach((l,i)=>{r.push({clientIP:l.client_ip,projectID:l.project_id,version:l.version})}),{nodeList:r,meta:{code:e.data.meta.code,message:e.data.meta.msg}}}async function V(s){const e=await v.post("/client/reload/config",{client_ip:s.clientIP,project_id:s.projectID});return{code:e.data.meta.code,message:e.data.meta.msg}}const q={tabindex:"0",class:"focus:tw-outline-none tw-text-sm tw-leading-none tw-text-gray-600 tw-h-16"},S={class:"tw-w-2/3"},U={class:"tw-flex tw-items-center"},O={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},R={class:"tw-text-xs tw-font-bold tw-leading-3 tw-text-white"},z={class:"tw-pl-2"},K={class:"tw-text-sm tw-font-medium tw-leading-none dark:tw-text-white"},T={class:"tw-text-xs tw-leading-3 tw-text-gray-400 tw-mt-2"},Y={class:"tw-w-min tw-flex tw-scale-75 md:tw-scale-100"},G=k("\u91CD\u8F7D\u914D\u7F6E"),H={class:"q-ml-sm"},J=x({props:{node:{type:Object,default:null}},setup(s){const e=s,l=(o=>{if(o==="")return"NODE";const a=o.split(".");return a[a.length-1]})(e.node.clientIP),i=f(!1),c=f(!1),d=async()=>{i.value=!0;try{const o=await V({clientIP:e.node.clientIP,projectID:e.node.projectID});o.code!==0?A.commit("error",{error:{message:o.message}}):c.value=!1}catch(o){console.log(o)}i.value=!1};return(o,a)=>(m(),_(y,null,[t("tr",q,[t("td",S,[t("div",U,[t("div",O,[t("p",R,w(D(l)),1)]),t("div",z,[t("p",K,w(s.node.clientIP),1),t("p",T,w(s.node.version),1)])])]),t("td",null,[t("div",Y,[n(p,{flat:"",class:"tw-text-red-300",onClick:a[0]||(a[0]=g=>c.value=!0)},{default:u(()=>[G]),_:1})])])]),n(L,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=g=>c.value=g)},{default:u(()=>[n(I,null,{default:u(()=>[n(b,{class:"tw-flex-row tw-flex tw-items-center"},{default:u(()=>[n(C,{icon:"delete",color:"red","text-color":"white"}),t("span",H,"\u662F\u5426\u8981\u91CD\u8F7D\u8282\u70B9 "+w(s.node.clientIP)+" \u7684\u914D\u7F6E\uFF1F",1)]),_:1}),n(N,{align:"right"},{default:u(()=>[j(n(p,{flat:"",label:"\u53D6\u6D88"},null,512),[[F,!0]]),n(p,{flat:"",label:"\u786E\u5B9A",color:"primary",loading:i.value,onClick:d},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var M=h(J,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/NodeListAdmin/NodeItem.vue"]]);const W={class:"tw-w-full tw-p-4"},X={class:"q-dark tw-w-full tw-rounded tw-overflow-hidden"},Z=t("div",{class:"tw-px-4 tw-py-4"},[t("div",{class:"sm:tw-flex tw-items-center tw-justify-between"},[t("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-base sm:tw-text-lg md:tw-text-xl lg:tw-text-2xl tw-font-bold tw-leading-normal tw-text-primary"}," \u8282\u70B9\u7BA1\u7406 "),t("div",{class:"tw-mt-4 sm:tw-mt-0"})])],-1),tt={class:"q-dark tw-px-4 tw-pb-5 tw-min-h-50 tw-relative"},et={class:"tw-overflow-x-auto"},st={class:"tw-w-full tw-whitespace-nowrap"},at=x({props:{orgId:{type:String,required:!0}},setup(s){const e=s,r=P(),l=f([]),i=f(!1);return(async()=>{i.value=!0;try{const d=await Q({oid:e.orgId,projectIDs:[]});d.meta.code===0?l.value=d.nodeList:r.commit("error",{error:{message:d.meta.message}})}catch(d){console.log(d)}i.value=!1})(),(d,o)=>(m(),_("div",W,[t("div",X,[Z,t("div",tt,[t("div",et,[t("table",st,[t("tbody",null,[(m(!0),_(y,null,B(l.value,a=>(m(),E(M,{key:a.clientIP,node:a},null,8,["node"]))),128))])])]),n($,{size:"md",showing:i.value},null,8,["showing"])])])]))}});var nt=h(at,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/NodeListAdmin/NodeListAdmin.vue"]]);export{nt as default};

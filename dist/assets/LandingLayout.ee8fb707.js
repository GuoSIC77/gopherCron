import{_ as Q,k as S,r as g,l as C,u as O,m as M,n as z,o as x,c as A,w as t,a as e,M as P,Q as $,K as B,f as I,x as N,C as T,h as k,A as n,i as H,E as j,F as G,H as q,S as _,T as c,b as p,ab as J,q as b,ac as K,ad as W,U as Y,a2 as X,d as y,t as F,z as Z,Y as ee,ae as te,J as ae,aa as le,af as se,ag as oe,ah as ue,ai as re,p as U,aj as ne,L as ie,ak as de,a4 as ce,al as fe,W as me,e as D,am as we,an as pe,ao as _e}from"./index.d883e21d.js";const ge={key:0,class:"text-h6"},ve={key:1,class:"text-h6"},he=S({props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:w}){const d=v,m=g(!1),o=C({get:()=>d.modelValue,set:a=>w("update:modelValue",a)}),s=O(),l=g({title:"",remark:"",id:""}),f=g({title:"",remark:"",id:""}),u=C(()=>{const a=l.value,r=f.value;return(a==null?void 0:a.title.trim())===(r==null?void 0:r.title.trim())&&(a==null?void 0:a.remark.trim())===(r==null?void 0:r.remark.trim())}),V=C(()=>{const a=l.value;return(a==null?void 0:a.title.trim())!==""&&!u.value});M(()=>{z(()=>{o.value||(l.value=Object.assign({},f.value))})});async function h(){const a=l.value;if(!a){s.commit("error",{error:"\u8BF7\u8F93\u5165\u7EC4\u7EC7\u4FE1\u606F"});return}s.commit("cleanError"),m.value=!0,a.id!==""?await s.dispatch("updateOrg",{id:a.id,title:a.title.trim(),remark:a.remark.trim()}):await s.dispatch("createOrg",{title:a.title.trim(),remark:a.remark.trim()}),s.state.Root.currentError===void 0&&(o.value=!1),m.value=!1}return(a,r)=>(x(),A(G,{modelValue:n(o),"onUpdate:modelValue":r[2]||(r[2]=i=>j(o)?o.value=i:null),"no-backdrop-dismiss":!n(u)},{default:t(()=>[e(H,{class:"tw-w-96 q-pa-sm"},{default:t(()=>[e(P,{onSubmit:h},{default:t(()=>[e($,null,{default:t(()=>[l.value.id===""?(x(),B("div",ge,"\u521B\u5EFA\u7EC4\u7EC7")):(x(),B("div",ve,"\u7F16\u8F91\u7EC4\u7EC7"))]),_:1}),e($,null,{default:t(()=>[e(I,{modelValue:l.value.title,"onUpdate:modelValue":r[0]||(r[0]=i=>l.value.title=i),type:"text",label:"\u7EC4\u7EC7\u540D\u79F0",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(I,{modelValue:l.value.remark,"onUpdate:modelValue":r[1]||(r[1]=i=>l.value.remark=i),type:"textarea",label:"\u5907\u6CE8",square:"",filled:""},null,8,["modelValue"])]),_:1}),e($,{align:"right",class:"tw-flex tw-gap-4 tw-flex-col-reverse lg:tw-flex-row lg:tw-justify-end"},{default:t(()=>[N(e(k,{flat:"",label:"\u53D6\u6D88",class:"lg:tw-w-24 tw-w-full"},null,512),[[T,!0]]),e(k,{color:"primary","text-color":"black",type:"submit",label:l.value.id===""?"\u521B\u5EFA":"\u4FDD\u5B58",disable:!n(V),class:"lg:tw-w-24 tw-w-full",loading:m.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","no-backdrop-dismiss"]))}});var be=Q(he,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogOrgForm.vue"]]);const xe={class:"text-center"},ye=S({props:{behavior:{type:String,default:"default"}},setup(v){const w=O(),d=g([]);async function m(l,f){var V;const u=[{label:"\u901A\u7528",value:"baseorg"}];(V=w.state.Root.userOrgs)==null||V.forEach((h,a,r)=>{h.id!=="baseorg"&&u.push({label:h.title,value:h.id})}),d.value=u,f(()=>{console.log("select done")})}m("",()=>{});const o=C({get:()=>w.state.Root.currentOrg,set:l=>{!l||(o.value?w.dispatch("switchOrg",l):w.commit("setCurrentOrg",l),localStorage.setItem("gc_choosed_org",l))}});M(()=>{if(!o.value){const l=q();o.value=l.params.orgId||"baseorg",w.commit("setCurrentOrg",o.value)}});const s=g(!1);return(l,f)=>(x(),B(ee,null,[e(be,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=u=>s.value=u)},null,8,["modelValue"]),e(n(Z),{ref:"search",modelValue:n(o),"onUpdate:modelValue":f[2]||(f[2]=u=>j(o)?o.value=u:null),dense:"",dark:"",color:"text-white",standout:"bg-white text-black","emit-value":"","map-options":"",label:"\u9009\u62E9\u7EC4\u7EC7",options:d.value,behavior:v.behavior,style:{width:"300px"},onFilter:m},{"no-option":t(()=>[e(_,null,{default:t(()=>[e(c,null,{default:t(()=>[p("div",xe,[e(J,{color:"grey-5",size:"24px"})])]),_:1})]),_:1})]),append:t(()=>[e(b,{name:"add",onClick:f[1]||(f[1]=K(u=>s.value=!0,["stop","prevent"]))})]),option:t(u=>[e(_,W(u.itemProps,{class:"tw-text-white"}),{default:t(()=>[e(c,null,{default:t(()=>[e(Y,{innerHTML:u.opt.label},null,8,["innerHTML"])]),_:2},1024),e(c,{side:"",class:X({"default-type":!u.opt.type})},{default:t(()=>[e(k,{outline:"",dense:"","no-caps":"","text-color":"grey-5",size:"12px",class:"tw-bg-white q-px-sm"},{default:t(()=>[y(F(u.opt.type||"\u5207\u6362")+" ",1),e(b,{name:"subdirectory_arrow_left",size:"14px"})]),_:2},1024)]),_:2},1032,["class"])]),_:2},1040)]),_:1},8,["modelValue","options","behavior"])],64))}});var L=Q(ye,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/layouts/OrgSelect.vue"]]);const ke={class:"tw-flex tw-bg-primary tw-justify-start tw-space-x-2 tw-items-center tw-h-full tw-py-4 tw-px-3.5 tw-box-border tw-w-full tw-text-black tw-overflow-hidden"},Ee={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},Ce={class:"tw-text-xs tw-font-bold tw-rounded tw-leading-3 tw-text-white"},Fe={class:"q-item__section--main tw-flex tw-w-full tw-justify-between"},Ve={class:"tw-flex tw-flex-col tw-space-y-2 tw-overflow-hidden"},Be={class:"tw-text-base tw-leading-4 tw-whitespace-nowrap tw-overflow-hidden tw-overflow-ellipsis"},Qe={class:"tw-cursor-pointer tw-text-xs tw-leading-3"},Se=S({setup(v){const d=O().getters.currentUser,m=te(d.name),o=ae(),s=()=>{o.push({name:"user-profile"})};return(l,f)=>(x(),B("div",ke,[p("div",Ee,[p("p",Ce,F(n(m)),1)]),p("div",Fe,[p("div",Ve,[p("p",Be,F(n(d).name),1),p("p",Qe,F(n(d).account),1)]),e(k,{flat:"",dense:"",size:"md",icon:"more_horiz",round:"",onClick:s})])]))}});var Oe=Q(Se,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/layouts/UserBaseInfo.vue"]]);async function $e(){const v=await le.get("/version");return v.data.meta.code===0?v.data.response:""}const Ae=p("span",{class:"tw-text-lg tw-pl-2 tw-tracking-wide tw-font-bold tw-cursor-pointer"},"GopherCron",-1),Ie={key:0,class:"tw-text-sm"},Ue={class:"tw-hidden md:tw-flex"},De=p("svg",{fill:"#fff",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),Le=y("\u770B\u677F"),Me=y("\u9879\u76EE\u7BA1\u7406"),ze=y("\u4EFB\u52A1\u7F16\u6392"),Ne=y("\u7528\u6237\u7BA1\u7406"),je=y("\u8282\u70B9\u7BA1\u7406"),qe=y("\u9000\u51FA"),Re=S({setup(v){const w=se(),d=g(!0);w.screen.lt.md&&(d.value=!1);const m=g(!0),o=g(!1),s=O(),l=q();z(()=>{if(!l.name)return;const r=["user-admin","node-admin"];o.value=r.includes(l.name.toString())});const f=C(()=>w.screen.lt.md?d.value:!m.value),u=g("");(async()=>{const r=await $e();u.value=r})();const h=C(()=>s.getters.notificationSetting);function a(){s.dispatch("changeNotificationStatus")}return(r,i)=>{const R=oe("router-view");return x(),A(ue,{view:"hHh Lpr lff",class:"rounded-borders tw-flex tw-flex-no-wrap tw-h-full tw-w-full"},{default:t(()=>[e(de,{class:"bg-black"},{default:t(()=>[e(re,{class:"tw-gap-4"},{default:t(()=>[e(k,{flat:"",round:"",dense:"",icon:"menu",onClick:i[0]||(i[0]=E=>d.value=!d.value)}),Ae,u.value?(x(),B("span",Ie,"("+F(u.value)+")",1)):U("v-if",!0),p("div",Ue,[e(L)]),e(ne),e(k,{flat:"",round:"",dense:"",icon:n(h).status?"notifications":"notifications_off",onClick:a},{default:t(()=>[e(ie,null,{default:t(()=>[y(F(n(h).status?"\u70B9\u51FB\u5173\u95ED\u4EFB\u52A1\u72B6\u6001\u901A\u77E5":"\u70B9\u51FB\u5F00\u542F\u4EFB\u52A1\u72B6\u6001\u901A\u77E5"),1)]),_:1})]),_:1},8,["icon"]),e(k,{flat:"",round:"",dense:"",href:"https://github.com/holdno/gopherCron",target:"_blank"},{default:t(()=>[De]),_:1})]),_:1})]),_:1}),e(pe,{modelValue:d.value,"onUpdate:modelValue":i[2]||(i[2]=E=>d.value=E),mini:m.value,width:200,breakpoint:n(w).screen.sizes.md,onMouseover:i[3]||(i[3]=E=>m.value=!1),onMouseout:i[4]||(i[4]=E=>m.value=!0)},{default:t(()=>[e(ce,{style:{"margin-bottom":"80px",height:"calc(100% - 80px)"}},{default:t(()=>[e(fe,{padding:""},{default:t(()=>[N(e(_,{class:"tw-flex md:tw-hidden"},{default:t(()=>[e(L,{behavior:"dialog"})]),_:1},512),[[me,n(f)]]),e(_,{clickable:"",to:{name:"summary",params:{orgId:n(s).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"timeline"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[Le]),_:1})]),_:1},8,["to"]),e(_,{clickable:"",to:{name:"projects",params:{orgId:n(s).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"view_list"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[Me]),_:1})]),_:1},8,["to"]),e(_,{clickable:"",to:{name:"workflows",params:{orgId:n(s).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"mediation"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[ze]),_:1})]),_:1},8,["to"]),e(D,{class:"tw-bg-stone-800"}),n(s).getters.isAdmin?(x(),A(we,{key:0,modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=E=>o.value=E),label:"\u7CFB\u7EDF\u7BA1\u7406","header-class":"tw-font-medium",icon:"admin_panel_settings"},{default:t(()=>[e(_,{clickable:"","inset-level":.2,to:{name:"user-admin",params:{orgId:n(s).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"supervisor_account"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[Ne]),_:1})]),_:1},8,["inset-level","to"]),e(_,{clickable:"","inset-level":.2,to:{name:"node-admin",params:{orgId:n(s).getters.currentOrg}}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"dynamic_form"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[je]),_:1})]),_:1},8,["inset-level","to"])]),_:1},8,["modelValue"])):U("v-if",!0),e(D,{class:"tw-bg-stone-800"}),e(_,{clickable:"",to:{name:"logout"}},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(b,{name:"logout"})]),_:1}),e(c,{class:"tw-font-medium"},{default:t(()=>[qe]),_:1})]),_:1})]),_:1})]),_:1}),e(Oe,{class:"tw-absolute tw-bottom-0 tw-left-0 tw-w-full",style:{height:"80px"}})]),_:1},8,["modelValue","mini","breakpoint"]),e(_e,{class:"tw-w-full tw-h-full tw-box-border"},{default:t(()=>[e(R)]),_:1})]),_:1})}}});var Te=Q(Re,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/layouts/LandingLayout.vue"]]);export{Te as default};

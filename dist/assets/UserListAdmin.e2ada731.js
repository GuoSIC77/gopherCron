var se=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var U=(e,s,o)=>s in e?se(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,x=(e,s)=>{for(var o in s||(s={}))ue.call(s,o)&&U(e,o,s[o]);if(O)for(var o of O(s))re.call(s,o)&&U(e,o,s[o]);return e},Q=(e,s)=>oe(e,ie(s));import{a as de,b as ce,dr as me,e as ve,c as n,r as S,w as K,h as F,Q as C,D as fe,i as ge,ds as z,dt as we,a8 as be,q as R,s as W,d5 as ye,y as M,R as T,F as l,W as k,K as I,B as c,A as V,J as xe,C as he,$ as _e,I as Se,o as pe,m as ke,Z as J,S as Z,du as Ve,bI as Ce,z as Be}from"./index.1dcbf74c.js";import{Q as Pe}from"./QInnerLoading.013e17cb.js";import{b as $e}from"./format.865294d5.js";import{_ as G}from"./ModifyBox.57d58cd3.js";import{C as Fe}from"./ClosePopup.21183726.js";import{f as De}from"./datetime.561112b0.js";import"./QForm.8b7788ad.js";function q(e,s){return[!0,!1].includes(e)?e:s}var Ne=de({name:"QPagination",props:Q(x({},ce),{modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||me.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}}),emits:["update:modelValue"],setup(e,{emit:s}){const{proxy:o}=ge(),{$q:m}=o,h=ve(e,m),r=n(()=>parseInt(e.min,10)),i=n(()=>parseInt(e.max,10)),b=n(()=>parseInt(e.maxPages,10)),v=n(()=>p.value+" / "+i.value),y=n(()=>q(e.boundaryLinks,e.input)),u=n(()=>q(e.boundaryNumbers,!e.input)),d=n(()=>q(e.directionLinks,e.input)),f=n(()=>q(e.ellipses,!e.input)),D=S(null),p=n({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=$e(t,r.value,i.value);e.modelValue!==a&&s("update:modelValue",a)}});K(()=>`${r.value}|${i.value}`,()=>{p.value=e.modelValue});const H=n(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),L=n(()=>e.gutter in z?`${z[e.gutter]}px`:e.gutter||null),X=n(()=>L.value!==null?`--q-pagination-gutter-parent:-${L.value};--q-pagination-gutter-child:${L.value}`:null),N=n(()=>{const t=[e.iconFirst||m.iconSet.pagination.first,e.iconPrev||m.iconSet.pagination.prev,e.iconNext||m.iconSet.pagination.next,e.iconLast||m.iconSet.pagination.last];return m.lang.rtl===!0?t.reverse():t}),Y=n(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),j=n(()=>we(e,"flat")),ee=n(()=>({[j.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),te=n(()=>{const t={[j.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),ae=n(()=>Q(x({},te.value),{color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),B=n(()=>{let t=Math.max(b.value,1+(f.value?2:0)+(u.value?2:0));const a={pgFrom:r.value,pgTo:i.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(i.value).length)}em`}};return b.value&&t<i.value-r.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(r.value,Math.min(i.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(i.value,a.pgFrom+t-1),u.value&&(a.boundaryStart=!0,a.pgFrom++),f.value&&a.pgFrom>r.value+(u.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),u.value&&(a.boundaryEnd=!0,a.pgTo--),f.value&&a.pgTo<i.value-(u.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function E(t){p.value=t}function le(t){p.value=p.value+t}const ne=n(()=>{function t(){p.value=D.value,D.value=null}return{"onUpdate:modelValue":a=>{D.value=a},onKeyup:a=>{be(a,13)===!0&&t()},onBlur:t}});function w(t,a,P){const _=x(x({"aria-label":a,"aria-current":"false"},ee.value),t);return P===!0&&Object.assign(_,x({"aria-current":"true"},ae.value)),a!==void 0&&(e.toFn!==void 0?_.to=e.toFn(a):_.onClick=()=>{E(a)}),F(C,_)}return Object.assign(o,{set:E,setByOffset:le}),()=>{const t=[],a=[];let P;if(y.value===!0&&(t.push(w({key:"bls",disable:e.disable||e.modelValue<=r.value,icon:N.value[0]},r.value)),a.unshift(w({key:"ble",disable:e.disable||e.modelValue>=i.value,icon:N.value[3]},i.value))),d.value===!0&&(t.push(w({key:"bdp",disable:e.disable||e.modelValue<=r.value,icon:N.value[1]},e.modelValue-1)),a.unshift(w({key:"bdn",disable:e.disable||e.modelValue>=i.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){P=[];const{pgFrom:_,pgTo:A,marginalStyle:$}=B.value;if(B.value.boundaryStart===!0){const g=r.value===e.modelValue;t.push(w({key:"bns",style:$,disable:e.disable,label:r.value},r.value,g))}if(B.value.boundaryEnd===!0){const g=i.value===e.modelValue;a.unshift(w({key:"bne",style:$,disable:e.disable,label:i.value},i.value,g))}B.value.ellipsesStart===!0&&t.push(w({key:"bes",style:$,disable:e.disable,label:"\u2026",ripple:!1},_-1)),B.value.ellipsesEnd===!0&&a.unshift(w({key:"bee",style:$,disable:e.disable,label:"\u2026",ripple:!1},A+1));for(let g=_;g<=A;g++)P.push(w({key:`bpg${g}`,style:$,disable:e.disable,label:g},g,g===e.modelValue))}return F("div",x({class:H.value},Y.value),[F("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...t,e.input===!0?F(fe,x({class:"inline",style:{width:`${v.value.length/1.5}em`},type:"number",dense:!0,value:D.value,disable:e.disable,dark:h.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:v.value,min:r.value,max:i.value},ne.value)):F("div",{class:"q-pagination__middle row justify-center"},P),...a])])}}});const qe={tabindex:"0",class:"focus:tw-outline-none tw-text-sm tw-leading-none tw-text-gray-600 tw-h-16"},Me={class:"tw-w-1/3 tw-px-4"},Ie={class:"tw-flex tw-items-center"},Le={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},Qe={class:"tw-text-xs tw-font-bold tw-leading-3 tw-text-white"},Te={class:"tw-pl-2"},je={class:"tw-text-sm tw-font-medium tw-leading-none dark:tw-text-white"},Ee={class:"tw-text-xs tw-leading-3 tw-text-gray-400 tw-mt-2"},Ae={class:"tw-w-1/4 tw-px-4"},Oe={class:"tw-flex tw-items-center tw-text-gray-400"},Ue={class:"tw-w-1/4 tw-px-4"},ze={class:"tw-flex tw-items-center tw-text-gray-400"},Ke={class:"tw-px-4"},Re={class:"tw-w-min tw-flex tw-scale-75 md:tw-scale-100"},We=Z("\u7F16\u8F91"),Je=Z("\u5220\u9664\u7528\u6237"),Ze={class:"q-ml-sm"},Ge=R({props:{user:{type:Object,default:null}},emits:["modify"],setup(e,{emit:s}){const o=e,m=W(),h=ye(o.user.name),r=()=>{s("modify",{})},i=async()=>{(await Ve({id:o.user.id})).meta.code===0&&(m.commit("success",{message:"\u5220\u9664\u6210\u529F"}),v.value=!1,s("modify",{}))},b=S(!1),v=S(!1);return(y,u)=>(M(),T(J,null,[l("tr",qe,[l("td",Me,[l("div",Ie,[l("div",Le,[l("p",Qe,k(I(h)),1)]),l("div",Te,[l("p",je,k(e.user.name),1),l("p",Ee,k(e.user.permissions.join(", ")||"-"),1)])])]),l("td",Ae,[l("div",Oe,k(e.user.account),1)]),l("td",Ue,[l("div",ze,k(I(De)(e.user.createTime*1e3)),1)]),l("td",Ke,[l("div",Re,[c(C,{color:"primary",class:"tw-mr-2 md:tw-mr-4","text-color":"black",onClick:u[0]||(u[0]=d=>b.value=!0)},{default:V(()=>[We]),_:1}),c(C,{disable:e.user.id===1,flat:"",class:"tw-text-red-300",onClick:u[1]||(u[1]=d=>v.value=!0)},{default:V(()=>[Je]),_:1},8,["disable"])])])]),c(ke,{modelValue:v.value,"onUpdate:modelValue":u[2]||(u[2]=d=>v.value=d)},{default:V(()=>[c(xe,null,{default:V(()=>[c(he,{class:"row items-center"},{default:V(()=>[c(_e,{icon:"delete",color:"red","text-color":"white"}),l("span",Ze,"\u662F\u5426\u8981\u5220\u9664\u7528\u6237 "+k(e.user.name),1)]),_:1}),c(Se,{align:"right"},{default:V(()=>[pe(c(C,{flat:"",label:"\u53D6\u6D88"},null,512),[[Fe,!0]]),c(C,{flat:"",label:"\u5220\u9664",color:"red",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(G,{modelValue:b.value,"onUpdate:modelValue":u[3]||(u[3]=d=>b.value=d),user:e.user,onModify:r},null,8,["modelValue","user"])],64))}}),He={class:"tw-w-full tw-p-4"},Xe={class:"q-dark tw-w-full tw-rounded tw-overflow-hidden"},Ye={class:"tw-px-4 tw-py-4"},et={class:"tw-flex tw-items-center tw-justify-between"},tt=l("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-base sm:tw-text-lg md:tw-text-xl lg:tw-text-2xl tw-font-bold tw-leading-normal tw-text-primary"}," \u7528\u6237\u7BA1\u7406 ",-1),at={class:"tw-mt-0"},lt={class:"q-dark tw-px-4 tw-pb-5 tw-min-h-50 tw-relative"},nt={class:"tw-overflow-x-auto"},st={class:"tw-w-full tw-whitespace-nowrap"},ot={class:"q-pa-lg flex flex-center"},gt=R({props:{orgId:{type:String,required:!0}},setup(e){const s=e,o=S(1),m=S(10),h=S(!1),r=W(),i=n(()=>r.state.Root.users),b=n(()=>{const u=r.state.Root.userTotal||0;return Math.ceil(u/m.value)}),v=S(!1),y=async()=>{v.value=!0;try{await r.dispatch("fetchUsers",{oid:s.orgId,page:o.value,pagesize:m.value})}catch(u){console.log(u)}v.value=!1};return y(),K(o,(u,d)=>{y()}),(u,d)=>(M(),T("div",He,[l("div",Xe,[l("div",Ye,[l("div",et,[tt,l("div",at,[c(C,{flat:"",class:"tw-text-white",icon:"add",onClick:d[0]||(d[0]=f=>h.value=!0)})])])]),l("div",lt,[l("div",nt,[l("table",st,[l("tbody",null,[(M(!0),T(J,null,Ce(I(i),f=>(M(),Be(Ge,{key:f.id,user:f,onModify:y},null,8,["user"]))),128))])])]),c(Pe,{size:"md",showing:v.value},null,8,["showing"])]),l("div",ot,[c(Ne,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=f=>o.value=f),color:"grey-4","active-color":"black",max:I(b),"boundary-numbers":!1},null,8,["modelValue","max"])]),c(G,{modelValue:h.value,"onUpdate:modelValue":d[2]||(d[2]=f=>h.value=f),onModify:y},null,8,["modelValue"])])]))}});export{gt as default};

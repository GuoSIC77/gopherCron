var se=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var z=(e,n,u)=>n in e?se(e,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[n]=u,y=(e,n)=>{for(var u in n||(n={}))ue.call(n,u)&&z(e,u,n[u]);if(U)for(var u of U(n))re.call(n,u)&&z(e,u,n[u]);return e},T=(e,n)=>oe(e,ie(n));import{a as de,cL as ce,c as o,r as _,w as K,h as $,Q as V,g as me,cM as A,cN as ve,Y as fe,j as R,u as J,l as Q,E as j,x as l,I as S,z as L,s as c,q as k,L as ge,f as we,J as W,F as Y,cO as be,N as ye,m as xe}from"./index.858abf03.js";import{Q as he}from"./QInnerLoading.f7395b79.js";import{Q as _e}from"./QInput.39515e5e.js";import{u as pe,a as Se}from"./focus-manager.2ec597e1.js";import{b as ke}from"./format.865294d5.js";import{_ as G}from"./ModifyBox.106b8eda.js";import{b as Ve,a as Ce,Q as Be}from"./QDialog.eb528cda.js";import{Q as Pe,C as $e}from"./ClosePopup.411262dd.js";import{f as Fe}from"./datetime.6205e5a7.js";import{g as Ne}from"./utils.3d38ee44.js";import"./use-prevent-scroll.a5760f87.js";import"./use-key-composition.89abe8dc.js";import"./uid.42677368.js";import"./QForm.44afa5f8.js";function D(e,n){return[!0,!1].includes(e)?e:n}var De=de({name:"QPagination",props:T(y({},pe),{modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ce.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}}),emits:["update:modelValue"],setup(e,{emit:n}){const{proxy:u}=me(),{$q:m}=u,x=Se(e,m),r=o(()=>parseInt(e.min,10)),i=o(()=>parseInt(e.max,10)),f=o(()=>parseInt(e.maxPages,10)),v=o(()=>p.value+" / "+i.value),w=o(()=>D(e.boundaryLinks,e.input)),s=o(()=>D(e.boundaryNumbers,!e.input)),d=o(()=>D(e.directionLinks,e.input)),M=o(()=>D(e.ellipses,!e.input)),F=_(null),p=o({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=ke(t,r.value,i.value);e.modelValue!==a&&n("update:modelValue",a)}});K(()=>`${r.value}|${i.value}`,()=>{p.value=e.modelValue});const H=o(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),q=o(()=>e.gutter in A?`${A[e.gutter]}px`:e.gutter||null),X=o(()=>q.value!==null?`--q-pagination-gutter-parent:-${q.value};--q-pagination-gutter-child:${q.value}`:null),N=o(()=>{const t=[e.iconFirst||m.iconSet.pagination.first,e.iconPrev||m.iconSet.pagination.prev,e.iconNext||m.iconSet.pagination.next,e.iconLast||m.iconSet.pagination.last];return m.lang.rtl===!0?t.reverse():t}),Z=o(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),E=o(()=>ve(e,"flat")),ee=o(()=>({[E.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),te=o(()=>{const t={[E.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),ae=o(()=>T(y({},te.value),{color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),C=o(()=>{let t=Math.max(f.value,1+(M.value?2:0)+(s.value?2:0));const a={pgFrom:r.value,pgTo:i.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(i.value).length)}em`}};return f.value&&t<i.value-r.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(r.value,Math.min(i.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(i.value,a.pgFrom+t-1),s.value&&(a.boundaryStart=!0,a.pgFrom++),M.value&&a.pgFrom>r.value+(s.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),s.value&&(a.boundaryEnd=!0,a.pgTo--),M.value&&a.pgTo<i.value-(s.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function I(t){p.value=t}function le(t){p.value=p.value+t}const ne=o(()=>{function t(){p.value=F.value,F.value=null}return{"onUpdate:modelValue":a=>{F.value=a},onKeyup:a=>{fe(a,13)===!0&&t()},onBlur:t}});function b(t,a,B){const h=y(y({"aria-label":a,"aria-current":"false"},ee.value),t);return B===!0&&Object.assign(h,y({"aria-current":"true"},ae.value)),a!==void 0&&(e.toFn!==void 0?h.to=e.toFn(a):h.onClick=()=>{I(a)}),$(V,h)}return Object.assign(u,{set:I,setByOffset:le}),()=>{const t=[],a=[];let B;if(w.value===!0&&(t.push(b({key:"bls",disable:e.disable||e.modelValue<=r.value,icon:N.value[0]},r.value)),a.unshift(b({key:"ble",disable:e.disable||e.modelValue>=i.value,icon:N.value[3]},i.value))),d.value===!0&&(t.push(b({key:"bdp",disable:e.disable||e.modelValue<=r.value,icon:N.value[1]},e.modelValue-1)),a.unshift(b({key:"bdn",disable:e.disable||e.modelValue>=i.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){B=[];const{pgFrom:h,pgTo:O,marginalStyle:P}=C.value;if(C.value.boundaryStart===!0){const g=r.value===e.modelValue;t.push(b({key:"bns",style:P,disable:e.disable,label:r.value},r.value,g))}if(C.value.boundaryEnd===!0){const g=i.value===e.modelValue;a.unshift(b({key:"bne",style:P,disable:e.disable,label:i.value},i.value,g))}C.value.ellipsesStart===!0&&t.push(b({key:"bes",style:P,disable:e.disable,label:"\u2026",ripple:!1},h-1)),C.value.ellipsesEnd===!0&&a.unshift(b({key:"bee",style:P,disable:e.disable,label:"\u2026",ripple:!1},O+1));for(let g=h;g<=O;g++)B.push(b({key:`bpg${g}`,style:P,disable:e.disable,label:g},g,g===e.modelValue))}return $("div",y({class:H.value},Z.value),[$("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...t,e.input===!0?$(_e,y({class:"inline",style:{width:`${v.value.length/1.5}em`},type:"number",dense:!0,value:F.value,disable:e.disable,dark:x.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:v.value,min:r.value,max:i.value},ne.value)):$("div",{class:"q-pagination__middle row justify-center"},B),...a])])}}});const Qe={tabindex:"0",class:"focus:tw-outline-none tw-text-sm tw-leading-none tw-text-gray-600 tw-h-16"},Le={class:"tw-w-1/3 tw-px-4"},Me={class:"tw-flex tw-items-center"},qe={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},Te={class:"tw-text-xs tw-font-bold tw-leading-3 tw-text-white"},je={class:"tw-pl-2"},Ee={class:"tw-text-sm tw-font-medium tw-leading-none dark:tw-text-white"},Ie={class:"tw-text-xs tw-leading-3 tw-text-gray-400 tw-mt-2"},Oe={class:"tw-w-1/4 tw-px-4"},Ue={class:"tw-flex tw-items-center tw-text-gray-400"},ze={class:"tw-w-1/4 tw-px-4"},Ae={class:"tw-flex tw-items-center tw-text-gray-400"},Ke={class:"tw-px-4"},Re={class:"tw-w-min tw-flex tw-scale-75 md:tw-scale-100"},Je=Y("\u7F16\u8F91"),We=Y("\u5220\u9664\u7528\u6237"),Ye={class:"q-ml-sm"},Ge=R({props:{user:{type:Object,default:null}},emits:["modify"],setup(e,{emit:n}){const u=e,m=J(),x=Ne(u.user.name),r=()=>{n("modify",{})},i=async()=>{(await be({id:u.user.id})).meta.code===0&&(m.commit("success",{message:"\u5220\u9664\u6210\u529F"}),v.value=!1,n("modify",{}))},f=_(!1),v=_(!1);return(w,s)=>(Q(),j(W,null,[l("tr",Qe,[l("td",Le,[l("div",Me,[l("div",qe,[l("p",Te,S(L(x)),1)]),l("div",je,[l("p",Ee,S(e.user.name),1),l("p",Ie,S(e.user.permissions.join(", ")||"-"),1)])])]),l("td",Oe,[l("div",Ue,S(e.user.account),1)]),l("td",ze,[l("div",Ae,S(L(Fe)(e.user.createTime*1e3)),1)]),l("td",Ke,[l("div",Re,[c(V,{color:"primary",class:"tw-mr-2 md:tw-mr-4","text-color":"black",onClick:s[0]||(s[0]=d=>f.value=!0)},{default:k(()=>[Je]),_:1}),c(V,{disable:e.user.id===1,flat:"",class:"tw-text-red-300",onClick:s[1]||(s[1]=d=>v.value=!0)},{default:k(()=>[We]),_:1},8,["disable"])])])]),c(Be,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=d=>v.value=d)},{default:k(()=>[c(Ve,null,{default:k(()=>[c(Ce,{class:"row items-center"},{default:k(()=>[c(ge,{icon:"delete",color:"red","text-color":"white"}),l("span",Ye,"\u662F\u5426\u8981\u5220\u9664\u7528\u6237 "+S(e.user.name),1)]),_:1}),c(Pe,{align:"right"},{default:k(()=>[we(c(V,{flat:"",label:"\u53D6\u6D88"},null,512),[[$e]]),c(V,{flat:"",label:"\u5220\u9664",color:"red",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(G,{modelValue:f.value,"onUpdate:modelValue":s[3]||(s[3]=d=>f.value=d),user:e.user,onModify:r},null,8,["modelValue","user"])],64))}}),He={class:"tw-w-full tw-p-4"},Xe={class:"q-dark tw-w-full tw-rounded tw-overflow-hidden"},Ze={class:"tw-px-4 tw-py-4"},et={class:"tw-flex tw-items-center tw-justify-between"},tt=l("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-base sm:tw-text-lg md:tw-text-xl lg:tw-text-2xl tw-font-bold tw-leading-normal tw-text-primary"}," \u7528\u6237\u7BA1\u7406 ",-1),at={class:"tw-mt-0"},lt={class:"q-dark tw-px-4 tw-pb-5 tw-min-h-50 tw-relative"},nt={class:"tw-overflow-x-auto"},st={class:"tw-w-full tw-whitespace-nowrap"},ot={class:"q-pa-lg flex flex-center"},pt=R({setup(e){const n=_(1),u=_(10),m=_(!1),x=J(),r=o(()=>x.state.Root.users),i=o(()=>{const w=x.state.Root.userTotal||0;return Math.ceil(w/u.value)}),f=_(!1),v=async()=>{f.value=!0;try{await x.dispatch("fetchUsers",{page:n.value,pagesize:u.value})}catch(w){console.log(w)}f.value=!1};return v(),K(n,(w,s)=>{v()}),(w,s)=>(Q(),j("div",He,[l("div",Xe,[l("div",Ze,[l("div",et,[tt,l("div",at,[c(V,{flat:"",class:"tw-text-white",icon:"add",onClick:s[0]||(s[0]=d=>m.value=!0)})])])]),l("div",lt,[l("div",nt,[l("table",st,[l("tbody",null,[(Q(!0),j(W,null,ye(L(r),d=>(Q(),xe(Ge,{key:d.id,user:d,onModify:v},null,8,["user"]))),128))])])]),c(he,{size:"md",showing:f.value},null,8,["showing"])]),l("div",ot,[c(De,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=d=>n.value=d),color:"grey-4","active-color":"black",max:L(i),"boundary-numbers":!1},null,8,["modelValue","max"])]),c(G,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=d=>m.value=d),onModify:v},null,8,["modelValue"])])]))}});export{pt as default};

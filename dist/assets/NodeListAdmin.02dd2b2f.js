import{Q as b}from"./QInnerLoading.dc4d4599.js";import{aI as v,_ as h,j as x,r as m,l as w,E as p,x as t,I as u,z as C,s as n,q as d,Q as f,L as I,f as D,J as y,F as N,bf as L,u as F,N as Q,m as k}from"./index.8ec00635.js";import{b as A,a as B,Q as E}from"./QDialog.fd4f138b.js";import{Q as P,C as $}from"./ClosePopup.229815c6.js";import"./focus-manager.5de30bde.js";import"./use-prevent-scroll.c821079a.js";async function j(o){const e=await v.get("/client/list",{params:{project_ids:o.projectIDs}}),r=[];return e.data.response&&e.data.response.length>0&&e.data.response.forEach((l,c)=>{r.push({clientIP:l.client_ip,version:l.version})}),{nodeList:r,meta:{code:e.data.meta.code,message:e.data.meta.msg}}}async function V(o){const e=await v.post("/client/reload/config",{client_ip:o.clientIP});return{code:e.data.meta.code,message:e.data.meta.msg}}const q={tabindex:"0",class:"focus:tw-outline-none tw-text-sm tw-leading-none tw-text-gray-600 tw-h-16"},S={class:"tw-w-2/3"},U={class:"tw-flex tw-items-center"},z={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},O={class:"tw-text-xs tw-font-bold tw-leading-3 tw-text-white"},J={class:"tw-pl-2"},R={class:"tw-text-sm tw-font-medium tw-leading-none dark:tw-text-white"},T={class:"tw-text-xs tw-leading-3 tw-text-gray-400 tw-mt-2"},G={class:"tw-w-min tw-flex tw-scale-75 md:tw-scale-100"},H=N("\u91CD\u8F7D\u914D\u7F6E"),K={class:"q-ml-sm"},M=x({props:{node:{type:Object,default:null}},setup(o){const e=o,l=(a=>{if(a==="")return"NODE";const i=a.split(".");return i[i.length-1]})(e.node.clientIP),c=m(!1),s=m(!1),_=async()=>{c.value=!0;try{const a=await V({clientIP:e.node.clientIP});a.code!==0?L.commit("error",{error:{message:a.message}}):s.value=!1}catch(a){console.log(a)}c.value=!1};return(a,i)=>(w(),p(y,null,[t("tr",q,[t("td",S,[t("div",U,[t("div",z,[t("p",O,u(C(l)),1)]),t("div",J,[t("p",R,u(o.node.clientIP),1),t("p",T,u(o.node.version),1)])])]),t("td",null,[t("div",G,[n(f,{flat:"",class:"tw-text-red-300",onClick:i[0]||(i[0]=g=>s.value=!0)},{default:d(()=>[H]),_:1})])])]),n(E,{modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=g=>s.value=g)},{default:d(()=>[n(A,null,{default:d(()=>[n(B,{class:"tw-flex-row tw-flex tw-items-center"},{default:d(()=>[n(I,{icon:"delete",color:"red","text-color":"white"}),t("span",K,"\u662F\u5426\u8981\u91CD\u8F7D\u8282\u70B9 "+u(o.node.clientIP)+" \u7684\u914D\u7F6E\uFF1F",1)]),_:1}),n(P,{align:"right"},{default:d(()=>[D(n(f,{flat:"",label:"\u53D6\u6D88"},null,512),[[$]]),n(f,{flat:"",label:"\u786E\u5B9A",color:"primary",loading:c.value,onClick:_},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var W=h(M,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/NodeListAdmin/NodeItem.vue"]]);const X={class:"tw-w-full tw-p-4"},Y={class:"q-dark tw-w-full tw-rounded tw-overflow-hidden"},Z=t("div",{class:"tw-px-4 tw-py-4"},[t("div",{class:"sm:tw-flex tw-items-center tw-justify-between"},[t("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-base sm:tw-text-lg md:tw-text-xl lg:tw-text-2xl tw-font-bold tw-leading-normal tw-text-primary"}," \u8282\u70B9\u7BA1\u7406 "),t("div",{class:"tw-mt-4 sm:tw-mt-0"})])],-1),tt={class:"q-dark tw-px-4 tw-pb-5 tw-min-h-50 tw-relative"},et={class:"tw-overflow-x-auto"},st={class:"tw-w-full tw-whitespace-nowrap"},at=x({setup(o){const e=F(),r=m([]),l=m(!1);return(async()=>{l.value=!0;try{const s=await j({projectIDs:[]});s.meta.code===0?r.value=s.nodeList:e.commit("error",{error:{message:s.meta.message}})}catch(s){console.log(s)}l.value=!1})(),(s,_)=>(w(),p("div",X,[t("div",Y,[Z,t("div",tt,[t("div",et,[t("table",st,[t("tbody",null,[(w(!0),p(y,null,Q(r.value,a=>(w(),k(W,{key:a.clientIP,node:a},null,8,["node"]))),128))])])]),n(b,{size:"md",showing:l.value},null,8,["showing"])])])]))}});var dt=h(at,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/NodeListAdmin/NodeListAdmin.vue"]]);export{dt as default};

var ze=Object.defineProperty;var Ce=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var xe=(F,t,p)=>t in F?ze(F,t,{enumerable:!0,configurable:!0,writable:!0,value:p}):F[t]=p,Ve=(F,t)=>{for(var p in t||(t={}))Oe.call(t,p)&&xe(F,p,t[p]);if(Ce)for(var p of Ce(t))Me.call(t,p)&&xe(F,p,t[p]);return F};import{_ as X,u as Z,r as y,o as g,c as T,w as o,a as e,b as _,t as R,d as j,Q as Y,e as ge,f as C,g as Le,h as x,i as se,j as Ye,k as re,l as I,m as G,n as we,p as B,q as me,s as he,v as He,x as J,C as ne,y as Ke,z as Te,A as s,B as pe,D as ke,E as We,F as ye,G as Je,H as be,I as oe,J as Fe,K as S,L as _e,M as Ee,N as Ge,O as $e,P as qe,R as Xe,S as Ue,T as ae,U as z,V as Ze,W as Se,X as H,Y as te,Z as et,$ as tt,a0 as lt,a1 as at,a2 as ut,a3 as De,a4 as ot,a5 as ce,a6 as st,a7 as Ae,a8 as Be}from"./index.b313b377.js";import{u as rt}from"./index.3e5ad8cc.js";import{C as ue}from"./Confirm.2ad71261.js";import{a as nt,f as ie}from"./datetime.561112b0.js";import{T as le}from"./task.f3ffd066.js";import{J as Re}from"./JSONViewer.9bd8e21c.js";import{G as it}from"./log.cfc959d9.js";import{t as dt,b as ct}from"./thumbStyle.856de4cb.js";const mt=_("br",null,null,-1),pt=_("br",null,null,-1),ft=j(" \u63D0\u4EA4 "),vt={props:{projectId:{type:Number,required:!0},clientIp:{type:String,required:!0},version:{type:String,required:!0},weight:{type:Number,required:!0},region:{type:String,required:!0}},setup(F){const t=F,p=Z(),v=y(t.weight),k=y(!1);async function c(){k.value=!0;const d=t.clientIp.split(":")[0];try{await Ye(t.projectId,d,Number(v.value)),await p.dispatch("Project/fetchProjectClients",{projectId:t.projectId}),p.commit("success",{message:"\u4FEE\u6539\u6210\u529F"})}catch(u){console.error(u)}k.value=!1}return(d,u)=>(g(),T(se,{flat:"",bordered:""},{default:o(()=>[e(Y,{class:"text-center"},{default:o(()=>[_("strong",null,R(F.clientIp),1),mt,j(" "+R(F.region)+" ",1),pt,j(" "+R(F.version),1)]),_:1}),e(ge),e(Y,{class:"flex flex-center"},{default:o(()=>[e(C,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=D=>v.value=D),outlined:"",dense:"",type:"number",prefix:"\u6743\u91CD\uFF1A",onKeyup:Le(c,["enter"])},{append:o(()=>[e(x,{dense:"",unelevated:"",loading:k.value,onClick:c},{default:o(()=>[ft]),_:1},8,["loading"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1}))}};var wt=X(vt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/ClientNode.vue"]]);const gt=_("div",{class:"text-h6"},"\u521B\u5EFA\u4EFB\u52A1",-1),kt=_("div",{class:"text-base"}," \u4E34\u65F6\u4EFB\u52A1\u540C\u6837\u4F1A\u4E0E\u6B63\u5F0F\u7684\u5B9A\u65F6\u4EFB\u52A1\u7ADE\u4E89\u76F8\u540C\u7684\u9501\uFF0C\u8BF7\u907F\u514D\u8C03\u5EA6\u51B2\u7A81(\u6307\u8FD0\u884C\u65F6\u95F4\u6709\u4EA4\u96C6) ",-1),yt={class:"tw-flex tw-gap-2 tw-justify-end tw-mb-2"},bt={class:"row items-center justify-end"},Ft={class:"row items-center justify-end"},Et=re({props:{modelValue:{type:Boolean,default:!1},task:{type:Object,default:()=>({})}},emits:["update:modelValue","created"],setup(F,{emit:t}){const p=F,v=I({get:()=>p.modelValue,set:n=>{t("update:modelValue",n),u.value=""}}),k=I(()=>{const n=[{value:"",label:"\u968F\u673A"}],i=c.state.Project.projectClients.get(p.task.projectId);return i&&i.forEach((f,O,V)=>{const A=f.clientIP;n.push({value:A,label:A})}),n}),c=Z(),d=y({taskId:p.task.id,projectId:p.task.projectId,command:p.task.command,remark:p.task.remark,noseize:p.task.noseize,scheduleTime:0,timeout:p.task.timeout,host:""}),u=y("");function D(n){u.value=nt(n*60,"YYYY-MM-DD HH:mm")}G(()=>{we(()=>{v.value&&(d.value=Object.assign({},{taskId:p.task.id,projectId:p.task.projectId,command:p.task.command,remark:p.task.remark,noseize:p.task.noseize,scheduleTime:0,timeout:p.task.timeout,host:""}))})});const q=y(!1);async function h(){const n=d.value;if(!n.remark){c.commit("error",{error:{message:"\u4EFB\u52A1\u8BF4\u660E\u5FC5\u586B"}});return}if(!n.command){c.commit("error",{error:{message:"\u6267\u884C\u547D\u4EE4\u5FC5\u586B"}});return}q.value=!0;try{const i=await Je({projectId:n.projectId,taskId:n.taskId,command:n.command,noseize:n.noseize,scheduleTime:Date.parse(u.value)/1e3,remark:n.remark,timeout:n.timeout,host:n.host});i.code!==0?c.commit("error",{error:{message:i.message}}):(c.commit("success",{message:"\u521B\u5EFA\u6210\u529F"}),v.value=!1,t("created"))}catch{}q.value=!1}return(n,i)=>(g(),T(ye,{modelValue:s(v),"onUpdate:modelValue":i[11]||(i[11]=f=>We(v)?v.value=f:null),persistent:""},{default:o(()=>[e(se,{class:"tw-w-96 q-pa-sm"},{default:o(()=>[e(Y,null,{default:o(()=>[gt,kt]),_:1}),e(Y,{style:{"max-height":"50vh"},class:"scroll"},{default:o(()=>[F.task?(g(),T(C,{key:"id","model-value":F.task.id,disable:"",label:"\u5173\u8054\u4EFB\u52A1 ID",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),e(C,{key:"remark",modelValue:d.value.remark,"onUpdate:modelValue":i[0]||(i[0]=f=>d.value.remark=f),type:"textarea",label:"\u4EFB\u52A1\u8BF4\u660E *",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),_("div",yt,[e(x,{dense:"",unelevated:"",class:"tw-text-xs tw-h-6 tw-px-3",color:"warning","text-color":"black",label:"\u4E00\u5206\u949F\u540E",onClick:i[1]||(i[1]=f=>D(1))}),e(x,{dense:"",unelevated:"",class:"tw-text-xs tw-h-6 tw-px-3",color:"warning","text-color":"black",label:"\u4E94\u5206\u949F\u540E",onClick:i[2]||(i[2]=f=>D(5))}),e(x,{dense:"",unelevated:"",class:"tw-text-xs tw-h-6 tw-px-3",color:"warning","text-color":"black",label:"\u4E00\u5C0F\u65F6\u540E",onClick:i[3]||(i[3]=f=>D(60))})]),e(C,{modelValue:u.value,"onUpdate:modelValue":i[6]||(i[6]=f=>u.value=f),filled:"",square:"",label:"\u8C03\u5EA6\u65F6\u95F4 *",class:"tw-mb-4"},{prepend:o(()=>[e(me,{name:"event",class:"cursor-pointer"},{default:o(()=>[e(he,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(He,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=f=>u.value=f),"text-color":"black",mask:"YYYY-MM-DD HH:mm"},{default:o(()=>[_("div",bt,[J(e(x,{label:"\u5173\u95ED",color:"primary",flat:""},null,512),[[ne,!0]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:o(()=>[e(me,{name:"access_time",class:"cursor-pointer"},{default:o(()=>[e(he,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(Ke,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=f=>u.value=f),mask:"YYYY-MM-DD HH:mm","text-color":"black",format24h:""},{default:o(()=>[_("div",Ft,[J(e(x,{label:"\u5173\u95ED",color:"primary",flat:""},null,512),[[ne,!0]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(C,{key:"timeout",modelValue:d.value.timeout,"onUpdate:modelValue":i[7]||(i[7]=f=>d.value.timeout=f),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 * (\u5355\u4F4D:\u79D2 s)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"command",modelValue:d.value.command,"onUpdate:modelValue":i[8]||(i[8]=f=>d.value.command=f),placeholder:'echo "hello word"',type:"textarea",label:"\u6267\u884C\u6307\u4EE4 *",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(Te,{modelValue:d.value.host,"onUpdate:modelValue":i[9]||(i[9]=f=>d.value.host=f),"emit-value":"","map-options":"",autogrow:"",square:"",filled:"",label:"\u6267\u884C\u8282\u70B9",options:s(k),class:"tw-mb-4"},null,8,["modelValue","options"]),e(pe,{key:"noseize",modelValue:d.value.noseize,"onUpdate:modelValue":i[10]||(i[10]=f=>d.value.noseize=f),"false-value":0,"true-value":1,label:"\u5E76\u884C\u8C03\u5EA6",class:"tw-mb-4"},null,8,["modelValue"])]),_:1}),e(ke,{align:"right",class:"tw-flex tw-gap-2 tw-flex-col-reverse lg:tw-flex-row tw-justify-center lg:tw-justify-end"},{default:o(()=>[J(e(x,{flat:"",label:"\u53D6\u6D88",class:"lg:tw-w-24 tw-w-full"},null,512),[[ne,!0]]),e(x,{color:"primary","text-color":"black",label:"\u521B\u5EFA",class:"lg:tw-w-24 tw-w-full !tw-ml-0",loading:q.value,onClick:h},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var Pe=X(Et,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/DialogTemporaryTaskForm.vue"]]);const jt={class:"tw-h-full tw-w-full tw-flex tw-flex-col"},It={key:0,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-2"},Ct=j("\u7ED3\u675F\u8FDB\u7A0B"),xt=j("\u7ACB\u5373\u6267\u884C"),Vt=j("\u4E34\u65F6\u8C03\u5EA6 "),ht=j(" \u6307\u5B9A\u65F6\u95F4\u8C03\u5EA6\u4E00\u6B21\u7684\u4EFB\u52A1 "),_t=j("\u590D\u5236\u4EFB\u52A1 "),Dt=j(" \u4EE5\u5F53\u524D\u4EFB\u52A1\u5185\u5BB9\u4E3A\u57FA\u7840\u8FDB\u884C\u65B0\u4EFB\u52A1\u7684\u521B\u5EFA "),At={key:1,class:"tw-flex tw-pb-3 tw-flex-wrap tw-gap-2 text-h6"},Bt={class:"q-pa-sm"},Tt=re({props:{id:{type:String,default:""},projectId:{type:Number,required:!0}},setup(F){const t=F;function p(){P.push({name:"temporary_tasks",params:{projectId:t.projectId}})}const v=I(()=>({id:"",name:"",projectId:t.projectId,command:"",cronExpr:"0 0 0 * * * *",remark:"",timeout:300,createTime:0,status:0,isRunning:-1,noseize:0,exclusion:0,clientIp:"",tmpId:""}));function k(m,r){return!m||!r?!1:m.projectId===r.projectId&&m.name===r.name&&m.cronExpr===r.cronExpr&&m.remark===r.remark&&m.timeout===r.timeout&&m.status===r.status&&m.noseize===r.noseize&&m.command===r.command}const c=Z(),d=be(),u=I(()=>{var m;return(m=c.state.Task.tasks.get(t.projectId))==null?void 0:m.find(r=>r.id===t.id||r.id===d.query.copyid)}),D=I(()=>c.state.Project.projects.find(m=>m.id===t.projectId)),q=y([]);function h(m){const r=[];m==null||m.forEach((U,W,ve)=>{r.push({value:U.id,label:U.title})}),q.value=r}c.state.Project.projects&&c.state.Project.projects.length>0&&h(c.state.Project.projects),oe(()=>c.state.Project.projects,(m,r)=>{h(r)});const n=y(Object.assign({},u.value||v.value)),i=I(()=>d.name&&d.name.toString()==="create_crontab_task"),f=I(()=>d.query.copyid&&d.query.copyid!=="");i.value&&(n.value.id="",n.value.isRunning=-1),oe(()=>t.id,(m,r)=>{var U;(t.id!==((U=u.value)==null?void 0:U.id)||!i.value&&n.value.id===""||n.value.id!==u.value.id)&&(n.value=Object.assign({},u.value||v.value)),n.value.isRunning=-1});const O=I(()=>{var m;return((m=u.value)==null?void 0:m.isRunning)===1?!1:!k(u.value,n.value)}),V=I(()=>{const{name:m,command:r,timeout:U,cronExpr:W}=n.value;return m!==""&&r!==""&&U>0&&W!==""}),A=I(()=>{const{name:m,command:r,timeout:U,cronExpr:W}=n.value;return m===""?"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A":r===""?"\u6267\u884C\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A":U<=0?"\u8D85\u65F6\u65F6\u95F4\u672A\u6307\u5B9A":W===""?"\u8C03\u5EA6\u8BA1\u5212\u672A\u6307\u5B9A":""});async function Q(){await c.dispatch("Task/fetchTasks",{projectId:t.projectId})}const P=Fe(),b=y(!1);async function M(){if(c.commit("cleanError"),!V.value){c.commit("error",{error:{message:A.value}});return}b.value=!0,(i.value||f.value)&&(n.value.id="");try{const m=await c.dispatch("saveTask",{task:JSON.parse(JSON.stringify(n.value))});i.value&&(await Q(),P.push({name:"crontab_task",params:{projectId:n.value.projectId,taskId:m.id}}))}catch{}b.value=!1}function N(){n.value=Object.assign({},u.value||v.value)}const l=y(!1),a=y(!1);async function w(m,r){c.commit("cleanError"),a.value=!0,console.log("delete loading",a.value);try{await c.dispatch("deleteTask",{projectId:m,taskId:r}),c.state.Root.currentError===void 0&&(await Q(),P.push({name:"crontab_tasks",params:{projectId:d.params.projectId}}),l.value=!1)}catch(U){console.error(U),c.commit("error",{error:U})}a.value=!1}const L=y(!1),K=y(!1);async function de(m,r){K.value=!1,L.value=!0;try{await Ge(c.getters.apiv1,m,r)}catch{L.value=!1}}G(()=>{c.watch(m=>[m.Root.eventTask],([m])=>{!m||m.projectId!==t.projectId||m.taskId!==t.id||le.isFinished(m.status)&&(L.value=!1)})});const ee=y(!1),$=y(!1),Qe=async()=>{$.value=!1,ee.value=!0;try{await $e({projectId:t.projectId,taskId:t.id}),await Q(),n.value.status=0}catch(m){console.error(m),c.commit("error",{error:m})}ee.value=!1},fe=y(!1);function Ne(){var m;P.push({name:"create_crontab_task",query:{copyid:(m=u.value)==null?void 0:m.id}})}return(m,r)=>{var U,W,ve,je,Ie;return g(),S("div",jt,[e(Pe,{modelValue:fe.value,"onUpdate:modelValue":r[0]||(r[0]=E=>fe.value=E),task:s(u),onCreated:p},null,8,["modelValue","task"]),e(ue,{modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=E=>l.value=E),content:"\u662F\u5426\u8981\u5220\u9664\u4EFB\u52A1"+((U=s(u))==null?void 0:U.name)+"?",type:"warning",loading:a.value,onConfirm:r[2]||(r[2]=E=>s(D)&&s(u)&&w(s(D).id,s(u).id))},null,8,["modelValue","content","loading"]),e(ue,{modelValue:$.value,"onUpdate:modelValue":r[3]||(r[3]=E=>$.value=E),content:"\u786E\u5B9A\u8981\u7ED3\u675F\u8FDB\u7A0B\u5417\uFF1F\u5F3A\u5236\u7ED3\u675F\u540E\u4EFB\u52A1\u7684\u542F\u7528\u72B6\u6001\u4F1A\u81EA\u52A8\u53D8\u66F4\u4E3A\u505C\u7528\u72B6\u6001\u3002",type:"warning",onConfirm:Qe},null,8,["modelValue"]),e(ue,{modelValue:K.value,"onUpdate:modelValue":r[4]||(r[4]=E=>K.value=E),content:"\u786E\u5B9A\u8981\u7ACB\u5373\u6267\u884C\u5417\uFF1F",onConfirm:r[5]||(r[5]=E=>s(u)&&de(F.projectId,s(u).id))},null,8,["modelValue"]),s(i)?B("v-if",!0):(g(),S("div",It,[e(x,{flat:"",dense:"",class:"tw-w-24 tw-text-red-300 lg:tw-hidden",icon:"delete",onClick:r[6]||(r[6]=E=>l.value=!0)}),((W=s(u))==null?void 0:W.isRunning)===1?(g(),T(x,{key:0,flat:"","text-color":"red",disable:((ve=s(u))==null?void 0:ve.isRunning)!==1,class:"tw-w-24 tw-ml-1",loading:ee.value,onClick:r[7]||(r[7]=E=>$.value=!0)},{default:o(()=>[Ct]),_:1},8,["disable","loading"])):B("v-if",!0),e(x,{color:"primary","text-color":"black",disable:s(O)||((je=s(u))==null?void 0:je.isRunning)===1,class:"tw-w-24",loading:L.value||((Ie=s(u))==null?void 0:Ie.isRunning)===1,onClick:r[8]||(r[8]=E=>K.value=!0)},{default:o(()=>[xt]),_:1},8,["disable","loading"]),e(x,{color:"warning","text-color":"black",class:"tw-w-24 tw-opacity-90",onClick:r[9]||(r[9]=E=>fe.value=!0)},{default:o(()=>[Vt,e(_e,{class:"bg-warning tw-text-black",offset:[10,10]},{default:o(()=>[ht]),_:1})]),_:1}),e(x,{outline:"",class:"tw-w-24 tw-opacity-90",onClick:Ne},{default:o(()=>[_t,e(_e,{class:"bg-warning tw-text-black",offset:[10,10]},{default:o(()=>[Dt]),_:1})]),_:1})])),s(f)?(g(),S("div",At," \u590D\u5236\u4EFB\u52A1 ")):B("v-if",!0),e(Ee,{class:"tw-w-full",onSubmit:M,onReset:N},{default:o(()=>[s(u)&&!s(i)?(g(),T(C,{key:"id","model-value":s(u).id,disable:"",label:"\u4EFB\u52A1 ID",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),s(i)?(g(),T(Te,{key:1,modelValue:n.value.projectId,"onUpdate:modelValue":r[10]||(r[10]=E=>n.value.projectId=E),square:"",filled:"",class:"tw-w-full tw-mb-4","emit-value":"","map-options":"",label:"\u6240\u5C5E\u9879\u76EE",placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",options:q.value},null,8,["modelValue","options"])):(g(),T(C,{key:"project","model-value":s(D)?s(D).title:"",disable:"",label:"\u6240\u5C5E\u9879\u76EE",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])),e(C,{key:"name",modelValue:n.value.name,"onUpdate:modelValue":r[11]||(r[11]=E=>n.value.name=E),label:"\u4EFB\u52A1\u540D\u79F0",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"cron",modelValue:n.value.cronExpr,"onUpdate:modelValue":r[12]||(r[12]=E=>n.value.cronExpr=E),label:"\u8C03\u5EA6\u8BA1\u5212 (*\u79D2 *\u5206 *\u65F6 *\u65E5 *\u6708 *\u5468 *\u5E74)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"timeout",modelValue:n.value.timeout,"onUpdate:modelValue":r[13]||(r[13]=E=>n.value.timeout=E),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 (\u5355\u4F4D:\u79D2 s)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"command",modelValue:n.value.command,"onUpdate:modelValue":r[14]||(r[14]=E=>n.value.command=E),placeholder:'echo "hello word"',type:"textarea",label:"\u6267\u884C\u6307\u4EE4",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"remark",modelValue:n.value.remark,"onUpdate:modelValue":r[15]||(r[15]=E=>n.value.remark=E),type:"textarea",label:"\u4EFB\u52A1\u5907\u6CE8",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(pe,{key:"noseize",modelValue:n.value.noseize,"onUpdate:modelValue":r[16]||(r[16]=E=>n.value.noseize=E),"false-value":0,"true-value":1,label:"\u5E76\u884C\u8C03\u5EA6",class:"tw-mb-4"},null,8,["modelValue"]),e(pe,{key:"status",modelValue:n.value.status,"onUpdate:modelValue":r[17]||(r[17]=E=>n.value.status=E),"false-value":0,"true-value":1,label:"\u662F\u5426\u542F\u7528",class:"tw-mb-4"},null,8,["modelValue"]),_("div",Bt,[e(x,{color:"primary","text-color":"black",type:"submit",label:s(f)?"\u786E\u8BA4\u590D\u5236":"\u4FDD\u5B58",disable:!s(O),loading:b.value,class:"lg:tw-w-24 tw-w-full lg:tw-mr-4 lg:tw-mb-0 tw-mb-4"},null,8,["label","disable","loading"]),e(x,{color:"primary",type:"reset",label:"\u91CD\u7F6E",flat:"",disable:!s(O),class:"lg:tw-w-24 tw-w-full"},null,8,["disable"])])]),_:1})])}}});var $t=X(Tt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/TaskDetail.vue"]]);const qt=j("\u8282\u70B9 IP"),Ut=j("\u5F00\u59CB\u65F6\u95F4"),St=j("\u7ED3\u675F\u65F6\u95F4"),Rt=re({props:{id:{type:String,required:!0},projectId:{type:Number,required:!0}},emits:["onpage"],setup(F,{emit:t}){const p=F,v=Z(),k=I(()=>v.state.Root.taskLogs),c=I(()=>v.state.Root.taskLogsTotal),d=I(()=>v.state.Root.loadingTaskLogs),u=y({sortBy:"",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),D=y();G(()=>{qe(()=>{var h;(h=D.value)==null||h.$el.querySelector("table.q-table").classList.add("tw-table-fixed")})});function q({pagination:{page:h,rowsPerPage:n}}){const i=u.value;i.page=h,i.rowsPerPage=n,t("onpage")}return we(()=>{const h=u.value;h.rowsNumber=c.value}),G(async()=>{we(async()=>{const h=u.value;await v.dispatch("fetchTaskLogs",{projectId:p.projectId,taskId:p.id,page:h.page,pageSize:h.rowsPerPage})})}),(h,n)=>(g(),T(s(Ze),{ref_key:"logTable",ref:D,pagination:u.value,"onUpdate:pagination":n[0]||(n[0]=i=>u.value=i),class:"tw-w-full tw-h-full tw-bg-[#121212]","rows-per-page-options":[5,10,15],rows:s(k),loading:s(d),"row-key":"id",color:"primary",flat:"","hide-header":"",onRequest:q},{loading:o(()=>[e(Xe,{showing:"",color:"primary"})]),body:o(i=>[e(se,{class:"tw-my-4 tw-x-full",flat:"",bordered:""},{default:o(()=>[e(Ue,null,{default:o(()=>[e(ae,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[qt]),_:1}),e(z,null,{default:o(()=>[j(R(i.row.clientIp),1)]),_:2},1024)]),_:2},1024),e(ae,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Ut]),_:1}),e(z,null,{default:o(()=>[j(R(s(ie)(i.row.startTime*1e3)),1)]),_:2},1024)]),_:2},1024),e(ae,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[St]),_:1}),e(z,null,{default:o(()=>[j(R(s(ie)(i.row.endTime*1e3)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(ge),e(Y,{class:"tw-w-full tw-overflow-x-auto"},{default:o(()=>[e(Re,{json:i.row.result},null,8,["json"])]),_:2},1024)]),_:2},1024)]),_:1},8,["pagination","rows","loading"]))}});var Pt=X(Rt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/TaskLogs.vue"]]);const Qt=j("\u8282\u70B9 IP"),Nt=j("\u5F00\u59CB\u65F6\u95F4"),zt=j("\u7ED3\u675F\u65F6\u95F4"),Ot={key:1,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-2"},Mt={key:2,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-2"},Lt=j("\u5220\u9664\u4EFB\u52A1"),Yt=j("\u7ED3\u675F\u8FDB\u7A0B"),Ht=j("\u590D\u5236\u4EFB\u52A1"),Kt={key:3},Wt=re({props:{id:{type:Number,default:0,required:!0},projectId:{type:Number,required:!0}},setup(F){const t=F,p=y(!1),v=y();function k(l){v.value={id:l.taskId,projectId:l.projectId,remark:l.remark,command:l.command,timeout:l.timeout,cronExpr:"",createTime:0,name:"",status:0,isRunning:0,noseize:0,exclusion:0,clientIp:"",tmpId:""}}const c=y(),d=Z(),u=y();function D(){var l;u.value=(l=d.state.Task.temporaryTasks.get(t.projectId))==null?void 0:l.find(a=>a.id===Number(t.id))}oe(()=>t.id,(l,a)=>{console.log("watched",l,a),D()}),oe(u,(l,a)=>{console.log("watched task",l,a),(!c.value||(l==null?void 0:l.tmpId)!==(a==null?void 0:a.tmpId))&&N()});function q(){u.value?(k(u.value),p.value=!0):console.error("failed to copy task, the task is not found")}const h=I(()=>d.state.Project.projects.find(l=>l.id===t.projectId));async function n(){try{await d.dispatch("Task/fetchTemporaryTasks",{projectId:t.projectId})}catch(l){console.error("failed to dispatch fetchTemporaryTasks",l)}}G(()=>{d.watch(l=>[l.Root.eventTask],async([l])=>{var a;!l||l.projectId!==t.projectId||l.tmpId!==((a=u.value)==null?void 0:a.tmpId)||!c.value&&le.isFinished(l.status)&&N()}),D()});const i=y(!1),f=y(!1),O=async()=>{if(!!u.value){f.value=!1,i.value=!0;try{await $e({projectId:t.projectId,taskId:u.value.taskId}),await n()}catch(l){console.log(l)}i.value=!1}},V=y(!1),A=y(!1),Q=Fe(),P=async()=>{A.value=!1,V.value=!0;try{await et(Number(t.id)),await n(),Q.back()}catch(l){console.log(l)}V.value=!1},b=y(!0);function M(l=500){let a=!1,w=!1;return b.value=!0,setTimeout(()=>{w=!0,a&&(b.value=!1)},l),()=>{a=!0,w&&(b.value=!1)}}async function N(){if(!u.value)return;const l=M(500);c.value=null;try{c.value=await it({taskId:u.value.taskId,projectId:u.value.projectId,tmpId:u.value.tmpId})}catch(a){console.error(a)}l()}return(l,a)=>{var w,L,K,de,ee;return g(),S(te,null,[e(Pe,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=$=>p.value=$),task:v.value,onCreated:n},null,8,["modelValue","task"]),e(ue,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=$=>f.value=$),content:"\u786E\u5B9A\u8981\u7ED3\u675F\u8FDB\u7A0B\u5417\uFF1F",type:"warning",onConfirm:O},null,8,["modelValue"]),e(ue,{modelValue:A.value,"onUpdate:modelValue":a[2]||(a[2]=$=>A.value=$),content:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u4E34\u65F6\u4EFB\u52A1\u5417\uFF1F",type:"warning",onConfirm:P},null,8,["modelValue"]),J(e(H,{type:"QInput",class:"tw-h-52 tw-mb-4",animation:"fade"},null,512),[[Se,b.value]]),!b.value&&c.value?(g(),T(se,{key:0,class:"tw-mb-4",flat:"",bordered:""},{default:o(()=>[e(Ue,null,{default:o(()=>[e(ae,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Qt]),_:1}),e(z,null,{default:o(()=>[j(R(c.value.clientIp),1)]),_:1})]),_:1}),e(ae,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[Nt]),_:1}),e(z,null,{default:o(()=>[j(R(s(ie)(c.value.startTime*1e3)),1)]),_:1})]),_:1}),e(ae,null,{default:o(()=>[e(z,{overline:""},{default:o(()=>[zt]),_:1}),e(z,null,{default:o(()=>[j(R(s(ie)(c.value.endTime*1e3)),1)]),_:1})]),_:1})]),_:1}),e(ge),e(Y,{class:"tw-w-full tw-overflow-x-auto"},{default:o(()=>[e(Re,{json:c.value.result},null,8,["json"])]),_:1})]),_:1})):B("v-if",!0),b.value?(g(),S("div",Ot,[e(H,{type:"QBtn",animation:"fade"})])):B("v-if",!0),b.value?B("v-if",!0):(g(),S("div",Mt,[(w=u.value)!=null&&w.isRunning?(g(),T(x,{key:0,loading:!0})):B("v-if",!0),((L=u.value)==null?void 0:L.isRunning)!==1&&!((K=c.value)!=null&&K.result)?(g(),T(x,{key:1,"text-color":"red",outline:"",class:"tw-w-24 tw-ml-1",loading:V.value,onClick:a[3]||(a[3]=$=>A.value=!0)},{default:o(()=>[Lt]),_:1},8,["loading"])):B("v-if",!0),((de=u.value)==null?void 0:de.isRunning)===1?(g(),T(x,{key:2,outline:"","text-color":"red",disable:((ee=u.value)==null?void 0:ee.isRunning)!==1,class:"tw-w-24 tw-ml-1",loading:i.value,onClick:a[4]||(a[4]=$=>f.value=!0)},{default:o(()=>[Yt]),_:1},8,["disable","loading"])):B("v-if",!0),e(x,{outline:"",class:"tw-w-24 tw-ml-1",onClick:q},{default:o(()=>[Ht]),_:1})])),b.value?(g(),S("div",Kt,[e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"}),e(H,{type:"QInput",class:"tw-mb-4",square:"",animation:"fade"})])):B("v-if",!0),!b.value&&u.value?(g(),T(Ee,{key:4,class:"tw-w-full"},{default:o(()=>[u.value?(g(),T(C,{key:"id","model-value":u.value.taskId+" - "+u.value.tmpId,disable:"",label:"\u4EFB\u52A1 ID\uFF08task_id - tmp_id\uFF09",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),e(C,{key:"project","model-value":s(h)?s(h).title:"",disable:"",label:"\u6240\u5C5E\u9879\u76EE",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(C,{key:"remark",modelValue:u.value.remark,"onUpdate:modelValue":a[5]||(a[5]=$=>u.value.remark=$),type:"textarea",label:"\u4EFB\u52A1\u5907\u6CE8",autogrow:"",disable:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"cron","model-value":s(ie)(u.value.scheduleTime*1e3,"YYYY-MM-DD HH:mm"),label:"\u8C03\u5EA6\u65F6\u95F4",square:"",disable:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(C,{key:"timeout",modelValue:u.value.timeout,"onUpdate:modelValue":a[6]||(a[6]=$=>u.value.timeout=$),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 (\u5355\u4F4D:\u79D2 s)",square:"",disable:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"command",modelValue:u.value.command,"onUpdate:modelValue":a[7]||(a[7]=$=>u.value.command=$),placeholder:'echo "hello word"',type:"textarea",label:"\u6267\u884C\u6307\u4EE4",autogrow:"",disable:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"noseize","model-value":u.value.noseize===1?"\u662F":"\u5426",type:"textarea",label:"\u5E76\u884C\u8C03\u5EA6",autogrow:"",disable:"",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])]),_:1})):B("v-if",!0)],64)}}});var Jt=X(Wt,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/TemporaryTaskDetail.vue"]]);const Gt={class:"q-ml-sm"},Xt={key:0,class:"tw-flex tw-flex-row-reverse tw-pb-3 tw-flex-wrap tw-gap-1"},Zt=j(" \u6267\u884C "),el={class:"q-pa-sm"},tl=re({props:{id:{type:String,default:""},projectId:{type:Number,required:!0}},setup(F){const t=F,p=I(()=>({id:"",name:"",projectId:t.projectId,command:"",remark:"",timeout:300,createTime:0,noseize:0})),v=Z(),k=I(()=>{var l;return(l=v.state.WorkFlowTask.tasks.get(t.projectId))==null?void 0:l.find(a=>a.id===t.id)}),c=I(()=>v.state.Project.projects.find(l=>l.id===t.projectId)),d=y(Object.assign({},k.value||p.value));oe(()=>t.id,(l,a)=>{var w;(t.id!==((w=k.value)==null?void 0:w.id)||!P.value&&d.value.id===""||d.value.id!==k.value.id)&&(d.value=Object.assign({},k.value||p.value))});const u=y(!0);oe(k,()=>{u.value&&(u.value=!1,d.value=Object.assign({},k.value||p.value))});const D=I(()=>JSON.stringify(k.value)!==JSON.stringify(d.value)),q=I(()=>{const{name:l,command:a,timeout:w}=d.value;return l!==""&&a!==""&&w>0}),h=I(()=>{const{name:l,command:a,timeout:w}=d.value;return l===""?"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A":a===""?"\u6267\u884C\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A":w<=0?"\u8D85\u65F6\u65F6\u95F4\u672A\u6307\u5B9A":""}),n=Fe(),i=y(!1);async function f(){i.value=!0;try{if(v.commit("cleanError"),!q.value){v.commit("error",{error:{message:h.value}});return}if(await v.dispatch("saveWorkFlowTask",{task:d.value}),u.value=!0,await v.dispatch("WorkFlowTask/fetchTasks",{projectId:t.projectId}),P.value){const l=Object.assign([],v.state.WorkFlowTask.tasks.get(t.projectId)||[]);l.sort((w,L)=>w.createTime-L.createTime);const a=l[l.length-1];n.push({name:"workflow_task",params:{projectId:t.projectId,taskId:a.id}})}}catch(l){console.error(l),v.commit("error",{error:l})}i.value=!1}function O(){d.value=Object.assign({},k.value||p.value)}const V=y(!1);async function A(l,a){v.commit("cleanError"),await v.dispatch("deleteWorkFlowTask",{projectId:l,taskId:a}),v.state.Root.currentError===void 0&&(v.dispatch("WorkFlowTask/fetchTasks",Ve({},t)),n.push({name:"workflow_tasks"}),V.value=!1)}const Q=be(),P=I(()=>Q.name&&Q.name.toString()==="create_workflow_task"),b=y(!1),M=y(!1);async function N(l,a){M.value=!1,b.value=!0;try{await lt(v.getters.apiv1,l,a)}catch(w){b.value=!0,console.error(w)}}return G(()=>{v.watch(l=>[l.Root.eventWorkFlowTask],([l])=>{var a;console.log(l),!(!l||l.projectId!==t.projectId||l.taskId!==t.id)&&(v.commit("notifySuccess",{message:`\u4EFB\u52A1 ${(a=k.value)==null?void 0:a.name} \u5F53\u524D\u72B6\u6001: ${l.status}`}),le.isRunning(l.status)?b.value=!0:le.isFinished(l.status)&&(b.value=!1))}),v.watch(l=>[l.Root.eventTask],([l])=>{var a;!l||l.projectId!==t.projectId||l.taskId!==t.id||(v.commit("notifySuccess",{message:`\u4EFB\u52A1 ${(a=k.value)==null?void 0:a.name} \u5F53\u524D\u72B6\u6001: ${l.status}`}),le.isRunning(l.status)?b.value=!0:le.isFinished(l.status)&&(b.value=!1))})}),(l,a)=>(g(),S(te,null,[e(ye,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=w=>V.value=w)},{default:o(()=>[e(se,null,{default:o(()=>[e(Y,{class:"row items-center"},{default:o(()=>{var w;return[e(tt,{icon:"delete",color:"primary","text-color":"white"}),_("span",Gt," \u662F\u5426\u8981\u5220\u9664\u4EFB\u52A1 "+R((w=s(k))==null?void 0:w.name),1)]}),_:1}),e(ke,{align:"right"},{default:o(()=>[J(e(x,{flat:"",label:"\u53D6\u6D88",color:"primary"},null,512),[[ne,!0]]),e(x,{flat:"",label:"\u5220\u9664",color:"red",onClick:a[0]||(a[0]=()=>s(c)&&s(k)&&A(s(c).id,s(k).id))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(P)?B("v-if",!0):(g(),S("div",Xt,[e(x,{flat:"",class:"tw-w-24 tw-text-red-300 lg:tw-hidden",icon:"delete",onClick:a[2]||(a[2]=w=>V.value=!0)}),e(x,{color:"primary","text-color":"black",disable:s(D),class:"tw-w-24",loading:b.value,onClick:a[3]||(a[3]=()=>M.value=!0)},{default:o(()=>[Zt]),_:1},8,["disable","loading"])])),e(Ee,{class:"tw-w-full",onSubmit:f,onReset:O},{default:o(()=>[s(k)?(g(),T(C,{key:"id","model-value":s(k).id,disable:"",label:"\u4EFB\u52A1 ID",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"])):B("v-if",!0),e(C,{key:"project","model-value":s(c)?s(c).title:"",disable:"",label:"\u6240\u5C5E\u9879\u76EE",square:"",filled:"",class:"tw-mb-4"},null,8,["model-value"]),e(C,{key:"name",modelValue:d.value.name,"onUpdate:modelValue":a[4]||(a[4]=w=>d.value.name=w),label:"\u4EFB\u52A1\u540D\u79F0",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"timeout",modelValue:d.value.timeout,"onUpdate:modelValue":a[5]||(a[5]=w=>d.value.timeout=w),modelModifiers:{number:!0},type:"number",label:"\u8D85\u65F6\u65F6\u95F4 (\u5355\u4F4D:\u79D2 s)",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"command",modelValue:d.value.command,"onUpdate:modelValue":a[6]||(a[6]=w=>d.value.command=w),type:"textarea",placeholder:'echo "hello word"',label:"\u6267\u884C\u6307\u4EE4",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(C,{key:"remark",modelValue:d.value.remark,"onUpdate:modelValue":a[7]||(a[7]=w=>d.value.remark=w),type:"textarea",label:"\u4EFB\u52A1\u5907\u6CE8",autogrow:"",square:"",filled:"",class:"tw-mb-4"},null,8,["modelValue"]),e(pe,{key:"noseize",modelValue:d.value.noseize,"onUpdate:modelValue":a[8]||(a[8]=w=>d.value.noseize=w),"false-value":0,"true-value":1,label:"\u5E76\u884C\u8C03\u5EA6",class:"tw-mb-4"},null,8,["modelValue"]),_("div",el,[e(x,{color:"primary","text-color":"black",type:"submit",label:"\u4FDD\u5B58",loading:i.value,disable:!s(D),class:"lg:tw-w-24 tw-w-full lg:tw-mr-4 lg:tw-mb-0 tw-mb-4"},null,8,["loading","disable"]),e(x,{color:"primary",type:"reset",label:"\u91CD\u7F6E",flat:"",disable:!s(D),class:"lg:tw-w-24 tw-w-full"},null,8,["disable"])])]),_:1}),e(ue,{modelValue:M.value,"onUpdate:modelValue":a[9]||(a[9]=w=>M.value=w),content:"\u786E\u5B9A\u8981\u7ACB\u5373\u6267\u884C\u5417\uFF1F",onConfirm:a[10]||(a[10]=w=>s(k)&&N(F.projectId,s(k).id))},null,8,["modelValue"])],64))}});var ll=X(tl,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/components/WorkFlowTaskDetail.vue"]]);const al={class:"tw-px-4 tw-pt-2 tw-w-full tw-h-full tw-flex tw-flex-col"},ul={class:"tw-text-[#7e7e7e] tw-mb-4"},ol={class:"tw-flex tw-items-center tw-justify-start tw-gap-4 tw-text-lg tw-mb-4"},sl={key:0,class:"tw-pb-4"},rl={class:"tw-flex tw-gap-2 tw-items-center"},nl=j(" \u5728\u7EBF\u8282\u70B9: "),il={class:"tw-flex tw-w-full tw-grow"},dl={class:"tw-h-full tw-w-full tw-flex tw-flex-col"},cl={key:0,class:"tw-hidden lg:tw-block"},ml=_("div",{class:"text-h6"},"\u8282\u70B9\u5217\u8868",-1),pl=_("div",{class:"text-base"},"\u4EC5 v2.4.6 \u53CA\u4EE5\u4E0A\u7248\u672C\u652F\u6301\u6743\u91CD\u53D8\u66F4",-1),fl={class:"tw-text-lg"},vl=re({props:{id:{type:String,default:""},projectId:{type:Number,required:!0},type:{type:String,default:"crontab"}},setup(F){const t=F,p=y(!1);function v(){p.value=!0}const k=Z(),c=I(()=>k.state.Project.projects.find(V=>V.id===t.projectId)),d=be(),u=y(),D=()=>{qe(()=>{var V;(V=u.value)==null||V.setScrollPosition("vertical",0)})},q=I(()=>d.name&&d.name.toString()===`create_${t.type}_task`),h=I(()=>{var V;if(q.value)return"detail";if(d.name){const A=d.name.toString();if(A===`${t.type}_task_logs`)return"logs";if(A===`${t.type}_task`)return"detail"}throw new Error(`Unknown route name ${(V=d.name)==null?void 0:V.toString()}`)}),{width:n}=rt();async function i(){await k.dispatch("Project/fetchProjectClients",{projectId:t.projectId})}G(()=>{i()}),at(()=>{k.commit("Project/setProjectClients",{clients:[]})});const f=I(()=>k.state.Project.projectClients.get(t.projectId)),O=I(()=>{const V=new Map;return f.value&&f.value.forEach((A,Q,P)=>{let b=V.get(A.region);b||(V.set(A.region,[]),b=V.get(A.region)),b==null||b.push(A)}),V});return(V,A)=>{var Q,P;return g(),S(te,null,[_("div",al,[_("div",ul,[_("div",ol,[_("span",null,[e(me,{name:"folder"}),j(" "+R((Q=s(c))==null?void 0:Q.title),1)]),_("span",null," ID: "+R(F.projectId),1)]),s(c)&&s(c).remark.trim()!==""?(g(),S("div",sl,R(s(c).remark),1)):B("v-if",!0),_("div",rl,[e(me,{name:"hive"}),nl,_("span",{class:ut(["tw-font-extrabold",{"tw-text-primary":s(f)&&s(f).length>0,"tw-text-red-500":!s(f)||s(f).length===0}])},R(((P=s(f))==null?void 0:P.length)||0),3),J(_("span",{class:"tw-text-white tw-cursor-pointer",onClick:v},"\u67E5\u770B\u8282\u70B9",512),[[Se,s(f)&&s(f).length>0]])])]),s(q)?B("v-if",!0):(g(),T(De,{key:0,"model-value":s(h),"active-color":"primary",align:"left",class:"lg:tw-hidden tw-display"},{default:o(()=>[e(ce,{name:"detail",label:"\u8BE6\u60C5",to:{name:`${t.type}_task`,params:{taskId:t.id}},replace:""},null,8,["to"]),e(ce,{name:"logs",label:"\u65E5\u5FD7",to:{name:`${t.type}_task_logs`,params:{taskId:t.id}},replace:""},null,8,["to"])]),_:1},8,["model-value"])),_("div",il,[_("div",dl,[e(s(ot),{ref_key:"scroll",ref:u,class:"tw-grow","thumb-style":s(dt),"bar-style":s(ct)},{default:o(()=>[e(st,{"model-value":s(h),animated:"",vertical:s(n)>=1024,class:"tw-w-full tw-h-full tw-bg-[#121212] tw-p-0 lg:tw-pr-4"},{default:o(()=>[e(Ae,{name:"detail",class:"tw-px-0"},{default:o(()=>[t.type==="crontab"?(g(),T($t,{key:0,id:t.id,"project-id":t.projectId},null,8,["id","project-id"])):t.type==="workflow"?(g(),T(ll,{key:1,id:t.id,"project-id":t.projectId},null,8,["id","project-id"])):B("v-if",!0),t.type==="temporary"?(g(),T(Jt,{key:2,id:Number(t.id),"project-id":t.projectId},null,8,["id","project-id"])):B("v-if",!0)]),_:1}),e(Ae,{name:"logs",class:"tw-px-0"},{default:o(()=>[e(Pt,{id:t.id,"project-id":t.projectId,onOnpage:D},null,8,["id","project-id"])]),_:1})]),_:1},8,["model-value","vertical"])]),_:1},8,["thumb-style","bar-style"])]),t.type!="temporary"?(g(),S("div",cl,[s(q)?B("v-if",!0):(g(),T(De,{key:0,"model-value":s(h),"active-color":"primary",vertical:"","switch-indicator":"",align:"left"},{default:o(()=>[e(ce,{name:"detail",label:"\u8BE6\u60C5",to:{name:`${t.type}_task`,params:{taskId:t.id}},replace:""},null,8,["to"]),e(ce,{name:"logs",label:"\u65E5\u5FD7",to:{name:`${t.type}_task_logs`,params:{taskId:t.id}},replace:""},null,8,["to"])]),_:1},8,["model-value"]))])):B("v-if",!0)])]),e(ye,{modelValue:p.value,"onUpdate:modelValue":A[0]||(A[0]=b=>p.value=b)},{default:o(()=>[e(se,{class:"tw-w-full"},{default:o(()=>[e(Y,null,{default:o(()=>[ml,pl]),_:1}),(g(!0),S(te,null,Be(s(O),([b,M])=>(g(),S(te,{key:b},[e(Y,null,{default:o(()=>[_("div",fl,"Region: "+R(b),1)]),_:2},1024),e(Y,{class:"tw-q-pt-none scroll tw-flex tw-items-center tw-justify-center tw-align-middle tw-gap-2 tw-flex-wrap",style:{"max-height":"60vh"}},{default:o(()=>[(g(!0),S(te,null,Be(M,N=>(g(),S("div",{key:N.clientIP,class:"md:tw-w-[48%] tw-w-full"},[e(wt,{"client-ip":N.clientIP,weight:N.weight,"project-id":F.projectId,version:N.version,region:N.region},null,8,["client-ip","weight","project-id","version","region"])]))),128))]),_:2},1024)],64))),128)),e(ke,{align:"right",class:"text-teal"},{default:o(()=>[J(e(x,{flat:"",label:"OK"},null,512),[[ne,!0]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});var Cl=X(vl,[["__file","/Users/boyan/development/opensource/gopherCronFE/src/pages/TaskDetail.vue"]]);export{Cl as default};
